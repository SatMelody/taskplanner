/*!
*  filename: ej2-dropdowns.umd.min.js
*  version : 1.0.25
*  Copyright Syncfusion Inc. 2001 - 2017. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/

!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("@syncfusion/ej2-base"),require("@syncfusion/ej2-data"),require("@syncfusion/ej2-lists"),require("@syncfusion/ej2-popups"),require("@syncfusion/ej2-inputs"));else if("function"==typeof define&&define.amd)define(["@syncfusion/ej2-base","@syncfusion/ej2-data","@syncfusion/ej2-lists","@syncfusion/ej2-popups","@syncfusion/ej2-inputs"],e);else{var i="object"==typeof exports?e(require("@syncfusion/ej2-base"),require("@syncfusion/ej2-data"),require("@syncfusion/ej2-lists"),require("@syncfusion/ej2-popups"),require("@syncfusion/ej2-inputs")):e(t["@syncfusion/ej2-base"],t["@syncfusion/ej2-data"],t["@syncfusion/ej2-lists"],t["@syncfusion/ej2-popups"],t["@syncfusion/ej2-inputs"]);for(var s in i)("object"==typeof exports?exports:t)[s]=i[s]}}(this,function(t,e,i,s,o){return function(t){function e(s){if(i[s])return i[s].exports;var o=i[s]={exports:{},id:s,loaded:!1};return t[s].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){var s,o;s=[i,e,i(1),i(4),i(9),i(13),i(15),i(17)],void 0!==(o=function(t,e,i,s,o,n,l,r){"use strict";function a(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),a(i),a(s),a(o),a(n),a(l),a(r)}.apply(e,s))&&(t.exports=o)},function(t,e,i){var s,o;s=[i,e,i(2),i(3)],void 0!==(o=function(t,e,i,s){"use strict";function o(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),o(i),o(s)}.apply(e,s))&&(t.exports=o)},function(t,e,i){var s,o;s=[i,e],void 0!==(o=function(t,e){"use strict";function i(t,e,i,s){o+=String.fromCharCode(t),setTimeout(function(){o=""},1e3);var a;if(o=s?o.toLowerCase():o,n===o){for(var p=0;p<l.length;p++)if(l[p].classList.contains(r)){a=p;break}return a+=1,l[a]}var h=e,u=o.length,d=void 0,c=void 0;i=i?i+1:0;var p=i;l=[];do{p===h.length&&(p=-1),a=-1===p?0:p,c=h[a],d=s?c.innerText.toLowerCase():c.innerText,d.substr(0,u)===o&&l.push(h[a]),p++}while(p!==i);return n=o,l[0]}function s(t,e,i,s){var o=e;s=void 0===s||null===s||s;var n={item:null,index:null};if(t.length){for(var l=t.length,r=s?t.toLocaleLowerCase():t,a=0,p=o;a<p.length;a++){var h=p[a],u=(s?h.textContent.toLocaleLowerCase():h.textContent).replace(/^\s+|\s+$/g,"");if("Equal"===i&&u===r||"StartsWith"===i&&u.substr(0,l)===r)return n.item=h,n.index=a,{item:h,index:a}}return n}return n}Object.defineProperty(e,"__esModule",{value:!0});var o="",n="",l=[],r="e-active";e.incrementalSearch=i,e.Search=s}.apply(e,s))&&(t.exports=o)},function(t,e,i){var s,o;s=[i,e],void 0!==(o=function(t,e){"use strict";function i(t,e,i,o){if(s(t),""!==e)for(var n=i?"gim":"gm",l="StartsWith"===o?"^("+e+")":"EndsWith"===o?"("+e+")$":"("+e+")",r=new RegExp(l,n),a=t.querySelectorAll("ul li"),p=0;p<a.length;p++){var h=a[p];h.innerHTML=h.innerHTML.replace(r,'<span class="e-highlight">$1</span>')}}function s(t){for(var e=t.querySelectorAll(".e-highlight"),i=e.length-1;i>=0;i--){var s=e[i].parentNode,o=document.createTextNode(e[i].textContent);s.replaceChild(o,e[i])}}Object.defineProperty(e,"__esModule",{value:!0}),e.highlightSearch=i}.apply(e,s))&&(t.exports=o)},function(t,e,i){var s,o;s=[i,e,i(5)],void 0!==(o=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}(i)}.apply(e,s))&&(t.exports=o)},function(t,e,i){var s,o,n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),l=this&&this.__decorate||function(t,e,i,s){var o,n=arguments.length,l=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,i,s);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(l=(n<3?o(l):n>3?o(e,i,l):o(e,i))||l);return n>3&&l&&Object.defineProperty(e,i,l),l};s=[i,e,i(6),i(6),i(6),i(7),i(8)],void 0!==(o=function(t,e,i,s,o,r,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dropDownBaseClasses={root:"e-dropdownbase",rtl:"e-rtl",content:"e-content",selected:"e-active",hover:"e-hover",noData:"e-nodata",fixedHead:"e-fixed-head",focus:"e-item-focus",li:a.cssClass.li,group:a.cssClass.group,disabled:a.cssClass.disabled,grouping:"e-dd-group"};var p=function(t){function l(e,i){var s=t.call(this,e,i)||this;return s.scrollTimer=-1,s.enableRtlElements=[],s.isRequested=!1,s}return n(l,t),l.prototype.getPropObject=function(t,e,i){var s=new Object,o=new Object,n=new Function("prop","return prop");s[n(t)]=e[n(t)],o[n(t)]=i[n(t)];var l=new Object;return l.newProperty=s,l.oldProperty=o,l},l.prototype.l10nUpdate=function(t){if("No Records Found"!==this.noRecordsTemplate||"The Request Failed"!==this.actionFailureTemplate){var e=t?this.actionFailureTemplate:this.noRecordsTemplate,s=void 0;this.list.innerHTML="",s=i.compile(e);for(var o=0,n=s({});o<n.length;o++){var l=n[o];this.list.appendChild(l)}}else{var r={noRecordsTemplate:"No Records Found",actionFailureTemplate:"The Request Failed"};this.l10n=new i.L10n("dropdownlist",r,this.locale),this.list.innerHTML=t?this.l10n.getConstant("actionFailureTemplate"):this.l10n.getConstant("noRecordsTemplate")}},l.prototype.getValueByText=function(t,e){var i=null,s=this.listData,o=this.fields;if(e)if("string"==typeof s[0]||"number"==typeof s[0])for(var n=0,l=s;n<l.length;n++){var r=l[n];if(String(r).toLowerCase()===t.toString().toLowerCase()){i="string"==typeof s[0]?String(r):this.getFormattedValue(String(r));break}}else s.filter(function(e){e[o.text].toString().toLowerCase()===t.toLowerCase()&&(i=e[o.value])});else if("string"==typeof s[0]||"number"==typeof s[0])for(var a=0,p=s;a<p.length;a++){var r=p[a];if(String(r)===t.toString()){i="string"==typeof s[0]?t:this.getFormattedValue(t);break}}else s.filter(function(e){e[o.text]===t&&(i=e[o.value])});return i},l.prototype.getTextByValue=function(t){var e,i=this.listData,o=this.fields;if("string"==typeof i[0]||"number"==typeof i[0])for(var n=0,l=i;n<l.length;n++){var r=l[n];if(r.toString()===t.toString()){e=r.toString();break}}else i.filter(function(i){s.isNullOrUndefined(i[o.value])||i[o.value].toString()!==t.toString()||(e=i[o.text])});return e},l.prototype.getFormattedValue=function(t){return this.listData&&this.listData.length&&("number"==typeof this.listData[0][this.fields.value?this.fields.value:"value"]||"number"==typeof this.listData[0])?parseInt(t,10):t},l.prototype.setEnableRtl=function(){this.list&&this.enableRtlElements.push(this.list),this.enableRtl?i.addClass(this.enableRtlElements,e.dropDownBaseClasses.rtl):s.removeClass(this.enableRtlElements,e.dropDownBaseClasses.rtl)},l.prototype.initialize=function(){if(this.bindEvent=!0,"UL"===this.element.tagName){var t=a.ListBase.createJsonFromElement(this.element);this.setProperties({fields:{text:"text",value:"text"}},!0),this.resetList(t,this.fields)}else if("SELECT"===this.element.tagName){var e=this.dataSource instanceof Array?this.dataSource.length>0:!s.isNullOrUndefined(this.dataSource);e||this.renderItemsBySelect()}else this.setListData(this.dataSource,this.fields,this.query)},l.prototype.getPersistData=function(){return this.addOnPersist([])},l.prototype.setEnabled=function(){this.enabled?this.element.setAttribute("aria-disabled","false"):this.element.setAttribute("aria-disabled","true")},l.prototype.renderItemsBySelect=function(){var t=this.element,e={value:"value",text:"text"},i=[],s=t.querySelectorAll("select>optgroup"),o=t.querySelectorAll("select>option");if(this.getJSONfromOption(i,o,e),s.length){for(var n=0;n<s.length;n++){var l=s[n],r={};r[e.text]=l.label,r.isHeader=!0;var a=l.querySelectorAll("option");i.push(r),this.getJSONfromOption(i,a,e)}t.querySelectorAll("select>option")}this.fields.text=e.text,this.fields.value=e.value,this.resetList(i,e)},l.prototype.getJSONfromOption=function(t,e,i){for(var s=0,o=e;s<o.length;s++){var n=o[s],l={};l[i.text]=n.innerText,l[i.value]=n.getAttribute(i.value)?n.getAttribute(i.value):n.innerText,t.push(l)}},l.prototype.preRender=function(){},l.prototype.setListData=function(t,e,i){var s=this;e=e||this.fields;var o;if(this.isActive=!0,t instanceof r.DataManager)this.isRequested=!0,this.trigger("actionBegin"),t.executeQuery(this.getQuery(i)).then(function(t){s.trigger("actionComplete",t);var i=t.result;o=s.renderItems(i,e),s.onActionComplete(o,i,t),s.isRequested=!1}).catch(function(t){s.isRequested=!1,s.onActionFailure(t)});else{var n=new r.DataManager(t),l=this.getQuery(i).executeLocal(n);o=this.renderItems(l,e),this.onActionComplete(o,l)}},l.prototype.onActionFailure=function(t){this.liCollections=[],this.trigger("actionFailure",t),this.l10nUpdate(!0),i.addClass([this.list],e.dropDownBaseClasses.noData)},l.prototype.onActionComplete=function(t,i,s){this.listData=i,this.list.innerHTML="",this.list.appendChild(t),this.liCollections=this.list.querySelectorAll("."+e.dropDownBaseClasses.li),this.ulElement=this.list.querySelector("ul"),this.postRender(this.list,i,this.bindEvent)},l.prototype.postRender=function(t,s,o){var n=t.querySelector("."+e.dropDownBaseClasses.li),l=t.querySelector("."+e.dropDownBaseClasses.selected);n&&!l&&i.addClass([n],e.dropDownBaseClasses.focus),s.length<=0?(this.l10nUpdate(),i.addClass([t],e.dropDownBaseClasses.noData)):t.classList.remove(e.dropDownBaseClasses.noData),this.groupTemplate&&this.renderGroupTemplate(t)},l.prototype.getQuery=function(t){return t||(this.query?this.query:new r.Query)},l.prototype.renderGroupTemplate=function(t){if(null!==this.fields.groupBy&&this.dataSource||this.element.querySelector("."+e.dropDownBaseClasses.group)){var i=this.dataSource,s=t.querySelectorAll("."+e.dropDownBaseClasses.group);a.ListBase.renderGroupTemplate(this.groupTemplate,i,this.fields,s)}},l.prototype.createListItems=function(t,o){t&&o.groupBy||this.element.querySelector("optgroup")?(o.groupBy&&(t=a.ListBase.groupDataSource(t,o)),i.addClass([this.list],e.dropDownBaseClasses.grouping)):t=this.getSortedDataSource(t);var n=!s.isNullOrUndefined(o.iconCss),l=null!==o.text||null!==o.value?{fields:o,showIcon:n,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}};return a.ListBase.createList(t,l,!0)},l.prototype.setFloatingHeader=function(t){s.isNullOrUndefined(this.fixedHeaderElement)&&(this.fixedHeaderElement=s.createElement("div",{className:e.dropDownBaseClasses.fixedHead}),this.list.querySelector("li").classList.contains(e.dropDownBaseClasses.group)||(this.fixedHeaderElement.style.display="none"),s.prepend([this.fixedHeaderElement],this.list),this.setFixedHeader()),this.scrollStop(t)},l.prototype.scrollStop=function(t){for(var i=t.target,o=parseInt(getComputedStyle(this.liCollections[0],null).getPropertyValue("height"),10),n=Math.round(i.scrollTop/o),l=this.ulElement.querySelectorAll("li"),r=n;r>-1;r--){if(!s.isNullOrUndefined(l[r])&&l[r].classList.contains(e.dropDownBaseClasses.group)){var a=l[r];this.fixedHeaderElement.innerHTML=a.innerHTML,this.fixedHeaderElement.style.display="block";break}this.fixedHeaderElement.style.display="none"}},l.prototype.renderItems=function(t,e){var i;if(this.itemTemplate&&t){var s=t;s=s&&e.groupBy?a.ListBase.groupDataSource(s,e,this.sortOrder):this.getSortedDataSource(s),i=a.ListBase.renderContentTemplate(this.itemTemplate,s,e)}else i=this.createListItems(t,e);return i},l.prototype.setFixedHeader=function(){this.list.parentElement.style.display="block";var t=this.liCollections[0].offsetWidth;this.fixedHeaderElement.style.width=t.toString()+"px",s.setStyleAttribute(this.fixedHeaderElement,{zIndex:10});var i=this.ulElement.querySelector("."+e.dropDownBaseClasses.group);this.fixedHeaderElement.innerHTML=i.innerHTML},l.prototype.getSortedDataSource=function(t){if(t&&"None"!==this.sortOrder){var e=this.fields.text?this.fields.text:"text";t=a.ListBase.getDataSource(t,a.ListBase.addSorting(this.sortOrder,e))}return t},l.prototype.getIndexByValue=function(t){for(var e,i=this.getItems(),s=0;s<i.length;s++)if(i[s].getAttribute("data-value")===t.toString()){e=s;break}return e},l.prototype.dispatchEvent=function(t,e){var i=document.createEvent("HTMLEvents");i.initEvent(e,!1,!0),t.dispatchEvent(i)},l.prototype.setFields=function(){var t=this.fields;this.fields.value&&!this.fields.text?this.fields.text=this.fields.value:!t.value&&t.text?this.fields.value=this.fields.text:this.fields.value||this.fields.text||(this.fields.value=this.fields.text="text")},l.prototype.resetList=function(t,e,i){this.list&&this.setListData(t,e,i)},l.prototype.updateSelection=function(){},l.prototype.renderList=function(){this.render()},l.prototype.onPropertyChanged=function(t,e){for(var i=0,s=Object.keys(t);i<s.length;i++){switch(s[i]){case"enableRtl":this.setEnableRtl();break;case"enabled":this.setEnabled();break;case"query":case"sortOrder":case"dataSource":case"itemTemplate":this.resetList(this.dataSource);break;case"groupTemplate":this.renderGroupTemplate(this.list);break;case"locale":this.list&&this.l10nUpdate()}}},l.prototype.render=function(t){this.list=s.createElement("div",{className:e.dropDownBaseClasses.content,attrs:{tabindex:"0"}}),this.list.classList.add(e.dropDownBaseClasses.root),this.setFields();var n={duration:300,selector:"."+e.dropDownBaseClasses.li};this.rippleFun=o.rippleEffect(this.list,n);var l=this.element.querySelector("select>optgroup");if(!this.fields.groupBy&&s.isNullOrUndefined(l)||i.EventHandler.add(this.list,"scroll",this.setFloatingHeader,this),"dropdownbase"===this.getModuleName()){this.element.getAttribute("tabindex")&&this.list.setAttribute("tabindex",this.element.getAttribute("tabindex")),s.removeClass([this.element],e.dropDownBaseClasses.root),this.element.style.display="none";var r=document.createElement("div");this.element.parentElement.insertBefore(r,this.element),r.appendChild(this.element),r.appendChild(this.list)}this.setEnableRtl(),this.setEnabled(),t||this.initialize()},l.prototype.getModuleName=function(){return"dropdownbase"},l.prototype.getItems=function(){return this.ulElement.querySelectorAll("."+e.dropDownBaseClasses.li)},l.prototype.addItem=function(t,o){this.list&&this.list.textContent!==this.noRecordsTemplate||this.renderList();var n=this.getItems().length,l=this.list.querySelector("."+e.dropDownBaseClasses.selected);t=t instanceof Array?t:[t];var r;r=s.isNullOrUndefined(o)||o<0||o>n-1?n:o;for(var a=this.fields,p=[],h=0;h<t.length;h++){var u=t[h],d=s.createElement("li",{className:e.dropDownBaseClasses.li,id:"option-add-"+h});d.setAttribute("data-value",u[a.value]),d.setAttribute("role","option"),d.appendChild(document.createTextNode(u[a.text])),p.push(d),this.listData.push(u)}if(0===n&&s.isNullOrUndefined(this.list.querySelector("ul")))this.list.innerHTML="",this.list.appendChild(this.ulElement),i.append(p,this.ulElement);else for(var h=0;h<t.length;h++){this.liCollections[r]?this.liCollections[r].parentNode.insertBefore(p[h],this.liCollections[r]):this.ulElement.appendChild(p[h]);var c=[].slice.call(this.liCollections);c.splice(r,0,p[h]),this.liCollections=c,r+=1}(l||0===o)&&this.updateSelection()},l.prototype.getDataByValue=function(t){if("string"==typeof this.listData[0]||"number"==typeof this.listData[0])for(var e=0,i=this.listData;e<i.length;e++){var s=i[e];if(s===t)return s}else for(var o=0,n=this.listData;o<n.length;o++){var s=n[o];if(s[this.fields.value?this.fields.value:"value"]===t)return s}return null},l.prototype.destroy=function(){document.body.contains(this.list)&&(i.EventHandler.remove(this.list,"scroll",this.setFloatingHeader),s.isNullOrUndefined(this.rippleFun)||this.rippleFun(),s.detach(this.list)),t.prototype.destroy.call(this)},l}(i.Component);l([i.Property({text:null,value:null,iconCss:null,groupBy:null})],p.prototype,"fields",void 0),l([i.Property(!1)],p.prototype,"enableRtl",void 0),l([i.Property(!1)],p.prototype,"enablePersistence",void 0),l([i.Property(null)],p.prototype,"itemTemplate",void 0),l([i.Property(null)],p.prototype,"groupTemplate",void 0),l([i.Property("No Records Found")],p.prototype,"noRecordsTemplate",void 0),l([i.Property("The Request Failed")],p.prototype,"actionFailureTemplate",void 0),l([i.Property("None")],p.prototype,"sortOrder",void 0),l([i.Property(!0)],p.prototype,"enabled",void 0),l([i.Property([])],p.prototype,"dataSource",void 0),l([i.Property(null)],p.prototype,"query",void 0),l([i.Event()],p.prototype,"actionBegin",void 0),l([i.Event()],p.prototype,"actionComplete",void 0),l([i.Event()],p.prototype,"actionFailure",void 0),l([i.Event()],p.prototype,"select",void 0),p=l([o.NotifyPropertyChanges],p),e.DropDownBase=p}.apply(e,s))&&(t.exports=o)},function(e,i){e.exports=t},function(t,i){t.exports=e},function(t,e){t.exports=i},function(t,e,i){var s,o;s=[i,e,i(10)],void 0!==(o=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}(i)}.apply(e,s))&&(t.exports=o)},function(t,e,i){var s,o,n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),l=this&&this.__decorate||function(t,e,i,s){var o,n=arguments.length,l=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,i,s);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(l=(n<3?o(l):n>3?o(e,i,l):o(e,i))||l);return n>3&&l&&Object.defineProperty(e,i,l),l};s=[i,e,i(6),i(6),i(6),i(6),i(11),i(12),i(2),i(5),i(7)],void 0!==(o=function(t,e,i,s,o,r,a,p,h,u,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dropDownListClasses={root:"e-dropdownlist",hover:u.dropDownBaseClasses.hover,selected:u.dropDownBaseClasses.selected,rtl:u.dropDownBaseClasses.rtl,li:u.dropDownBaseClasses.li,disable:u.dropDownBaseClasses.disabled,base:u.dropDownBaseClasses.root,focus:u.dropDownBaseClasses.focus,input:"e-input-group",inputFocus:"e-input-focus",icon:"e-input-group-icon e-ddl-icon",iconAnimation:"e-icon-anim",value:"e-input-value",device:"e-ddl-device",backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",filterParent:"e-filter-parent",mobileFilter:"e-ddl-device-filter",footer:"e-ddl-footer",header:"e-ddl-header",clearIcon:"e-clear-icon",clearIconHide:"e-clear-icon-hide",popupFullScreen:"e-popup-full-page"};var c={container:null,buttons:[]},v=function(t){function l(e,i){var s=t.call(this,e,i)||this;return s.isPopupOpen=!1,s.isDocumentClick=!1,s.isInteracted=!1,s.isFilterFocus=!1,s.beforePopupOpen=!1,s.initial=!0,s.initRemoteRender=!1,s.isNotSearchList=!1,s.isTyped=!1,s.isSelected=!1,s.preventFocus=!1,s.preventAutoFill=!1,s.isValidKey=!1,s.typedString="",s.isEscapeKey=!1,s.isPreventBlur=!1,s.isTabKey=!1,s.actionCompleteData={isUpdated:!1},s.prevSelectPoints={},s.isSelectCustom=!1,s.isDropDownClick=!1,s.preventAltUp=!1,s.keyConfigure={tab:"tab",enter:"13",escape:"27",end:"35",home:"36",down:"40",up:"38",pageUp:"33",pageDown:"34",open:"alt+40",close:"shift+tab",hide:"alt+38",space:"32"},s}return n(l,t),l.prototype.preRender=function(){this.element.style.opacity="0",t.prototype.preRender.call(this),this.activeIndex=this.index,this.queryString=""},l.prototype.renderList=function(e){t.prototype.render.call(this,e),this.wireListEvents()},l.prototype.floatLabelChange=function(){if("dropdownlist"===this.getModuleName()&&"Auto"===this.floatLabelType){var t=this.inputWrapper.container.querySelector(".e-float-text");""!==this.inputElement.value||this.isInteracted?r.classList(t,["e-label-top"],["e-label-bottom"]):r.classList(t,["e-label-bottom"],["e-label-top"])}},l.prototype.resetHandler=function(t){t.preventDefault(),this.clear()},l.prototype.resetFocusElement=function(){if(this.removeHover(),this.removeSelection(),this.removeFocus(),this.list.scrollTop=0,"autocomplete"!==this.getModuleName()){var t=this.ulElement.querySelector("."+e.dropDownListClasses.li);t&&t.classList.add(e.dropDownListClasses.focus)}},l.prototype.clear=function(){this.resetSelection(),this.onChangeEvent(null)},l.prototype.resetSelection=function(){this.list&&(this.allowFiltering&&"autocomplete"!==this.getModuleName()&&this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(!0),this.actionCompleteData.list),this.resetFocusElement()),this.hiddenElement.innerHTML="",this.inputElement.value="",this.value=null,this.text=null,this.index=null,this.activeIndex=null,this.item=null,this.itemData=null,this.queryString="",this.valueTempElement&&(r.detach(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null),this.setSelection(null,null),this.isSelectCustom=!1,this.updateIconState()},l.prototype.setHTMLAttributes=function(){if(Object.keys(this.htmlAttributes).length)for(var t=0,e=Object.keys(this.htmlAttributes);t<e.length;t++){var i=e[t];if("class"===i)this.inputWrapper.container.classList.add(this.htmlAttributes[i]);else if("disabled"===i&&"disabled"===this.htmlAttributes[i])this.enabled=!1,this.setEnable();else if("readonly"===i&&"readonly"===this.htmlAttributes[i])this.readonly=!0,this.dataBind();else if("style"===i)this.inputWrapper.container.setAttribute("style",this.htmlAttributes[i]);else{var s=["title","id","name","placeholder","required"];s.indexOf(i)>-1?"placeholder"===i?p.Input.setPlaceholder(this.htmlAttributes[i],this.inputElement):this.element.setAttribute(i,this.htmlAttributes[i]):this.inputWrapper.container.setAttribute(i,this.htmlAttributes[i])}}},l.prototype.getAriaAttributes=function(){return{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-haspopup":"true","aria-expanded":"false","aria-activedescendant":"null"}},l.prototype.setEnableRtl=function(){p.Input.setEnableRtl(this.enableRtl,[this.inputElement.parentElement]),this.popupObj&&(this.popupObj.enableRtl=this.enableRtl,this.popupObj.dataBind())},l.prototype.setEnable=function(){p.Input.setEnabled(this.enabled,this.inputElement),this.enabled?(r.removeClass([this.inputWrapper.container],e.dropDownListClasses.disable),this.inputElement.setAttribute("aria-disabled","false"),this.targetElement().setAttribute("tabindex",this.tabIndex)):(this.hidePopup(),r.addClass([this.inputWrapper.container],e.dropDownListClasses.disable),this.inputElement.setAttribute("aria-disabled","true"),this.targetElement().tabIndex=-1)},l.prototype.getPersistData=function(){return this.addOnPersist(["value"])},l.prototype.preventTabIndex=function(t){"dropdownlist"===this.getModuleName()&&(t.tabIndex=-1)},l.prototype.targetElement=function(){return this.inputWrapper.container},l.prototype.getNgDirective=function(){return"EJ-DROPDOWNLIST"},l.prototype.getElementByText=function(t){return this.getElementByValue(this.getValueByText(t))},l.prototype.getElementByValue=function(t){for(var e,i=this.getItems(),s=0,o=i;s<o.length;s++){var n=o[s];if(this.getFormattedValue(n.getAttribute("data-value"))===t){e=n;break}}return e},l.prototype.initValue=function(){this.renderList(),this.dataSource instanceof d.DataManager?this.initRemoteRender=!0:this.updateValues()},l.prototype.updateValues=function(){s.isNullOrUndefined(this.value)?this.text&&s.isNullOrUndefined(this.value)?this.setSelection(this.getElementByText(this.text),null):this.setSelection(this.liCollections[this.activeIndex],null):this.setSelection(this.getElementByValue(this.value),null),this.setHiddenValue(),p.Input.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},l.prototype.onBlur=function(t){var i=t.relatedTarget,o=t.target,n=this.isPreventBlur;return this.isPreventBlur=!1,n&&!this.isDocumentClick&&this.isPopupOpen&&(!s.isNullOrUndefined(o)||!this.isFilterLayout()&&s.isNullOrUndefined(i))?void("dropdownlist"===this.getModuleName()&&this.allowFiltering&&this.isPopupOpen?this.filterInput.focus():this.targetElement().focus()):this.isDocumentClick||!s.isNullOrUndefined(this.popupObj)&&document.body.contains(this.popupObj.element)&&this.popupObj.element.classList.contains(e.dropDownListClasses.mobileFilter)?void(this.beforePopupOpen||(this.isDocumentClick=!1)):void(("dropdownlist"===this.getModuleName()&&!this.isFilterFocus&&i!==this.inputElement&&(document.activeElement!==i||document.activeElement===i&&o.classList.contains(e.dropDownListClasses.inputFocus))||s.isNullOrUndefined(i)&&"dropdownlist"===this.getModuleName()&&this.allowFiltering&&o!==this.inputWrapper.container||"dropdownlist"!==this.getModuleName()&&!this.inputWrapper.container.contains(i)||this.isTabKey)&&(this.isDocumentClick=!!this.isPopupOpen,this.focusOutAction(),this.isTabKey=!1))},l.prototype.focusOutAction=function(){this.isInteracted=!1,this.focusOut(),this.onFocusOut()},l.prototype.onFocusOut=function(){this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(null)),this.floatLabelChange(),this.dispatchEvent(this.hiddenElement,"change"),this.inputWrapper.clearButton&&r.addClass([this.inputWrapper.clearButton],e.dropDownListClasses.clearIconHide),this.trigger("blur")},l.prototype.onFocus=function(){this.isInteracted||(this.isInteracted=!0,this.trigger("focus")),this.updateIconState()},l.prototype.wireEvent=function(){i.EventHandler.add(this.inputWrapper.container,"mousedown",this.dropDownClick,this),i.EventHandler.add(this.inputWrapper.container,"focus",this.focusIn,this),i.EventHandler.add(this.inputWrapper.container,"keypress",this.onSearch,this),this.bindCommonEvent()},l.prototype.bindCommonEvent=function(){i.EventHandler.add(this.targetElement(),"blur",this.onBlur,this),o.Browser.isDevice||(this.keyboardModule=new i.KeyboardEvents(this.targetElement(),{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"})),this.bindClearEvent()},l.prototype.bindClearEvent=function(){this.showClearButton&&i.EventHandler.add(this.inputWrapper.clearButton,"mousedown",this.resetHandler,this)},l.prototype.unBindCommonEvent=function(){i.EventHandler.remove(this.targetElement(),"blur",this.onBlur),o.Browser.isDevice||this.keyboardModule.destroy(),this.showClearButton&&i.EventHandler.remove(this.inputWrapper.clearButton,"mousedown",this.resetHandler)},l.prototype.updateIconState=function(){this.showClearButton&&(""!==this.inputElement.value?r.removeClass([this.inputWrapper.clearButton],e.dropDownListClasses.clearIconHide):r.addClass([this.inputWrapper.clearButton],e.dropDownListClasses.clearIconHide))},l.prototype.wireListEvents=function(){i.EventHandler.add(this.list,"click",this.onMouseClick,this),i.EventHandler.add(this.list,"mouseover",this.onMouseOver,this),i.EventHandler.add(this.list,"mouseout",this.onMouseLeave,this)},l.prototype.onSearch=function(t){32!==t.charCode&&13!==t.charCode&&(void 0===this.list&&this.renderList(),this.searchKeyEvent=t,this.isRequested||s.isNullOrUndefined(this.list.querySelector("li"))||this.incrementalSearch(t))},l.prototype.onMouseClick=function(t){var e=t.target,i=(e.classList,r.closest(e,"."+u.dropDownBaseClasses.li));if(this.isValidLI(i))if(this.setSelection(i,t),o.Browser.isDevice&&this.isFilterLayout())history.back();else{this.closePopup(100)}},l.prototype.onMouseOver=function(t){var e=r.closest(t.target,"."+u.dropDownBaseClasses.li);this.setHover(e)},l.prototype.setHover=function(t){this.enabled&&this.isValidLI(t)&&!t.classList.contains(u.dropDownBaseClasses.hover)&&(this.removeHover(),r.addClass([t],u.dropDownBaseClasses.hover))},l.prototype.onMouseLeave=function(t){this.removeHover()},l.prototype.removeHover=function(){var t=this.list.querySelectorAll("."+u.dropDownBaseClasses.hover);t&&t.length&&r.removeClass(t,u.dropDownBaseClasses.hover)},l.prototype.isValidLI=function(t){return t&&t.hasAttribute("role")&&"option"===t.getAttribute("role")},l.prototype.incrementalSearch=function(t){if(this.liCollections.length>0){var e=h.incrementalSearch(t.charCode,this.liCollections,this.activeIndex,!0);s.isNullOrUndefined(e)||(this.setSelection(e,t),this.setScrollPosition())}},l.prototype.keyActionHandler=function(t){var i="pageUp"===t.action||"pageDown"===t.action,o="dropdownlist"!==this.getModuleName()&&("home"===t.action||"end"===t.action);this.isEscapeKey="escape"===t.action,this.isTabKey=!this.isPopupOpen&&"tab"===t.action;var n="down"===t.action||"up"===t.action||"pageUp"===t.action||"pageDown"===t.action||"home"===t.action||"end"===t.action;if((!(this.isEditTextBox()||i||o)||this.isPopupOpen)&&!this.readonly){var l="tab"===t.action||"close"===t.action;if(void 0!==this.list||this.isRequested||l||"escape"===t.action||(this.searchKeyEvent=t,this.renderList()),s.isNullOrUndefined(this.list)||!s.isNullOrUndefined(this.liCollections)&&n&&0===this.liCollections.length||this.isRequested)return;switch((l&&this.isPopupOpen||"escape"===t.action)&&t.preventDefault(),this.isSelected="escape"!==t.action&&this.isSelected,this.isTyped=!n&&"escape"!==t.action&&this.isTyped,t.action){case"down":case"up":var r=this.list.querySelector("."+e.dropDownListClasses.focus);if(this.isSelectFocusItem(r))this.setSelection(r,t);else{var a=void 0,p="down"===t.action?this.activeIndex+1:this.activeIndex-1,h=0;"autocomplete"===this.getModuleName()&&(h="down"===t.action&&s.isNullOrUndefined(this.activeIndex)?0:this.liCollections.length-1,p=p<0?this.liCollections.length-1:p===this.liCollections.length?0:p),a=s.isNullOrUndefined(this.activeIndex)?this.liCollections[h]:this.liCollections[p],this.setSelection(a,t)}t.preventDefault();break;case"pageUp":this.pageUpSelection(this.activeIndex-this.getPageCount(),t),t.preventDefault();break;case"pageDown":this.pageDownSelection(this.activeIndex+this.getPageCount(),t),t.preventDefault();break;case"home":if(t.preventDefault(),0===this.activeIndex)return;this.setSelection(this.liCollections[0],t);break;case"end":t.preventDefault();var u=this.getItems().length-1;if(this.activeIndex===u)return;this.setSelection(this.liCollections[u],t);break;case"space":"dropdownlist"===this.getModuleName()&&(this.beforePopupOpen?t.preventDefault():this.showPopup());break;case"open":this.showPopup();break;case"hide":this.preventAltUp=this.isPopupOpen,this.hidePopup(),this.focusDropDown(t);break;case"enter":this.selectCurrentItem(t);break;case"escape":case"tab":case"close":this.isPopupOpen&&(this.hidePopup(),this.focusDropDown(t))}}},l.prototype.selectCurrentItem=function(t){if(this.isPopupOpen){var i=this.list.querySelector("."+e.dropDownListClasses.focus);i&&(this.setSelection(i,t),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(t)),this.hidePopup(),this.focusDropDown(t)}else this.showPopup()},l.prototype.isSelectFocusItem=function(t){return!s.isNullOrUndefined(t)},l.prototype.getPageCount=function(){var t=this.list.classList.contains(u.dropDownBaseClasses.noData)?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height");return Math.round(this.list.getBoundingClientRect().height/parseInt(t,10))},l.prototype.pageUpSelection=function(t,e){var i=t>=0?this.liCollections[t+1]:this.liCollections[0];this.setSelection(i,e)},l.prototype.pageDownSelection=function(t,e){var i=this.getItems(),s=t<=i.length?this.liCollections[t-1]:this.liCollections[i.length-1];this.setSelection(s,e)},l.prototype.unWireEvent=function(){i.EventHandler.remove(this.inputWrapper.container,"mousedown",this.dropDownClick),i.EventHandler.remove(this.inputWrapper.container,"keypress",this.onSearch),i.EventHandler.remove(this.inputWrapper.container,"focus",this.focusIn),this.unBindCommonEvent()},l.prototype.unWireListEvents=function(){i.EventHandler.remove(this.list,"click",this.onMouseClick),i.EventHandler.remove(this.list,"mouseover",this.onMouseOver),i.EventHandler.remove(this.list,"mouseout",this.onMouseLeave)},l.prototype.onDocumentClick=function(t){
var i=t.target;if(!s.isNullOrUndefined(this.popupObj)&&r.closest(i,"#"+this.popupObj.element.id)||this.inputWrapper.container.contains(t.target))i===this.inputElement||this.allowFiltering&&i===this.filterInput||"combobox"===this.getModuleName()&&!this.allowFiltering&&o.Browser.isDevice&&i===this.inputWrapper.buttons[0]||(this.isPreventBlur=(o.Browser.isIE||"edge"===o.Browser.info.name)&&(document.activeElement===this.targetElement()||document.activeElement===this.filterInput),t.preventDefault());else if(this.inputWrapper.container.classList.contains(e.dropDownListClasses.inputFocus)||this.isPopupOpen){this.isDocumentClick=!0;var n=this.isRequested;this.isInteracted=!1,this.hidePopup(),n||(this.onFocusOut(),this.inputWrapper.container.classList.remove(e.dropDownListClasses.inputFocus))}},l.prototype.activeStateChange=function(){this.isDocumentClick&&(this.hidePopup(),this.onFocusOut(),this.inputWrapper.container.classList.remove(e.dropDownListClasses.inputFocus))},l.prototype.focusDropDown=function(t){!this.initial&&this.isFilterLayout()&&this.focusIn()},l.prototype.dropDownClick=function(t){if(!this.targetElement().classList.contains(e.dropDownListClasses.disable)&&this.inputWrapper.clearButton!==t.target){var i=t.target;i===this.inputElement||this.allowFiltering&&i===this.filterInput||"combobox"===this.getModuleName()||t.preventDefault(),this.readonly||(this.isPopupOpen?(this.hidePopup(),this.isFilterLayout()&&this.focusDropDown(t)):(this.focusIn(),this.floatLabelChange(),this.queryString=""===this.inputElement.value.trim()?null:this.inputElement.value,this.isDropDownClick=!0,this.showPopup()))}},l.prototype.updateSelectedItem=function(t,e,i){this.removeSelection(),t.classList.add(u.dropDownBaseClasses.selected),this.removeHover();var s=this.getFormattedValue(t.getAttribute("data-value"));if(this.item=t,this.itemData=this.getDataByValue(s),!this.initial&&!i){this.isSelected=!0;var o={e:e,item:this.item,itemData:this.itemData,isInteracted:!!e};this.trigger("select",o)}var n=this.list.querySelector("."+u.dropDownBaseClasses.focus);n&&r.removeClass([n],u.dropDownBaseClasses.focus),t.setAttribute("aria-selected","true"),this.activeIndex=this.getIndexByValue(s)},l.prototype.activeItem=function(t){this.isValidLI(t)&&!t.classList.contains(u.dropDownBaseClasses.selected)&&(this.removeSelection(),t.classList.add(u.dropDownBaseClasses.selected),this.removeHover(),t.setAttribute("aria-selected","true"))},l.prototype.setValue=function(t){var e=this.getItemData();return null===e.value?p.Input.setValue(null,this.inputElement,this.floatLabelType,this.showClearButton):p.Input.setValue(e.text,this.inputElement,this.floatLabelType,this.showClearButton),this.previousValue===e.value?(this.isSelected=!1,!0):(this.isSelected=!this.initial,this.isSelectCustom=!1,"dropdownlist"===this.getModuleName()&&this.updateIconState(),!1)},l.prototype.setSelection=function(t,e){this.isValidLI(t)&&!t.classList.contains(u.dropDownBaseClasses.selected)&&this.updateSelectedItem(t,e,!1),this.list&&this.removeHover(),this.selectedLI=t,this.setValue(e)||(this.valueTemplate&&null!==this.itemData?this.setValueTemplate():this.inputElement.previousSibling===this.valueTempElement&&(r.detach(this.valueTempElement),this.inputElement.style.display="block"),this.isPopupOpen&&(s.attributes(this.targetElement(),{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null}),this.isFilterLayout()&&s.attributes(this.filterInput,{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null})),(!this.isPopupOpen&&!s.isNullOrUndefined(t)||this.isPopupOpen&&!s.isNullOrUndefined(e)&&("keydown"!==e.type||"keydown"===e.type&&"enter"===e.action))&&(this.isSelectCustom=!1,this.onChangeEvent(e)),!this.isPopupOpen||s.isNullOrUndefined(this.selectedLI)||null===this.itemData||e&&"click"===e.type||this.setScrollPosition(e))},l.prototype.setValueTemplate=function(){var t;this.valueTempElement||(this.valueTempElement=i.createElement("span",{className:e.dropDownListClasses.value}),this.inputElement.parentElement.insertBefore(this.valueTempElement,this.inputElement),this.inputElement.style.display="none",this.inputWrapper.container.focus(),r.addClass([this.inputWrapper.container],[e.dropDownListClasses.inputFocus])),this.valueTempElement.innerHTML="",t=i.compile(this.valueTemplate);for(var s=0,o=t(this.itemData);s<o.length;s++){var n=o[s];this.valueTempElement.appendChild(n)}},l.prototype.removeSelection=function(){var t=this.list.querySelectorAll("."+u.dropDownBaseClasses.selected);t.length&&(r.removeClass(t,u.dropDownBaseClasses.selected),t[0].removeAttribute("aria-selected"))},l.prototype.getItemData=function(){var t=this.fields,e={};return e=this.itemData,{value:s.isNullOrUndefined(e)||null!==e[t.value]&&!e[t.value]?e:e[t.value],text:s.isNullOrUndefined(e)||null!==e[t.text]&&!e[t.text]?e:e[t.text]}},l.prototype.onChangeEvent=function(t){var e=this.getItemData(),i=this.isSelectCustom?null:this.activeIndex;this.setProperties({value:e.value,index:i,text:e.text},!0),this.detachChangeEvent(t)},l.prototype.detachChangeEvent=function(t){if(this.isSelected=!1,this.previousValue=this.value,this.activeIndex=this.index,this.typedString=s.isNullOrUndefined(this.text)?"":this.text,!this.initial){this.setHiddenValue();var e={e:t,item:this.item,itemData:this.itemData,isInteracted:!!t,value:this.value};this.trigger("change",e)}},l.prototype.setHiddenValue=function(){s.isNullOrUndefined(this.value)?this.hiddenElement.innerHTML="":this.hiddenElement.innerHTML="<option selected value ="+this.value+">"+this.text+"</option>"},l.prototype.onFilterUp=function(t){if(this.isValidKey=40===t.keyCode||38===t.keyCode||this.isValidKey,this.isValidKey)switch(this.isValidKey=!1,t.keyCode){case 38:case 40:"autocomplete"!==this.getModuleName()||this.isPopupOpen||this.preventAltUp||this.isRequested?this.preventAutoFill=!1:(this.preventAutoFill=!0,this.searchLists(t)),this.preventAltUp=!1,t.preventDefault();break;case 46:case 8:this.typedString=this.filterInput.value,!this.isPopupOpen&&""!==this.typedString||this.isPopupOpen&&this.queryString.length>0?(this.preventAutoFill=!0,this.searchLists(t)):""===this.typedString&&(this.resetFocusElement(),this.activeIndex=null,"autocomplete"===this.getModuleName()&&this.hidePopup()),t.preventDefault();break;default:this.typedString=this.filterInput.value,this.preventAutoFill=!1,this.searchLists(t)}},l.prototype.onFilterDown=function(t){switch(t.keyCode){case 13:break;case 40:case 38:this.queryString=this.filterInput.value,t.preventDefault();break;case 9:this.isPopupOpen&&t.preventDefault();break;default:this.prevSelectPoints=this.getSelectionPoints(),this.queryString=this.filterInput.value}},l.prototype.removeFillSelection=function(){if(this.isInteracted){var t=this.getSelectionPoints();this.inputElement.setSelectionRange(t.end,t.end)}},l.prototype.getSelectionPoints=function(){var t=this.inputElement;return{start:Math.abs(t.selectionStart),end:Math.abs(t.selectionEnd)}},l.prototype.searchLists=function(t){var i=this;if(this.isTyped=!0,this.activeIndex=null,this.filterInput.parentElement.querySelector("."+e.dropDownListClasses.clearIcon)){this.filterInput.parentElement.querySelector("."+e.dropDownListClasses.clearIcon).style.visibility=""===this.filterInput.value?"hidden":"visible"}this.isFiltering()&&this.trigger("filtering",{text:this.filterInput.value,updateData:function(t,e,o){s.isNullOrUndefined(i.filterInput)||(i.beforePopupOpen=!0,""===i.filterInput.value.trim()?(i.actionCompleteData.isUpdated=!1,i.isTyped=!1,i.onActionComplete(i.actionCompleteData.ulElement,i.actionCompleteData.list),i.isTyped=!0,s.isNullOrUndefined(i.itemData)||"dropdownlist"!==i.getModuleName()||(i.focusIndexItem(),i.setScrollPosition()),i.isNotSearchList=!0):(i.isNotSearchList=!1,i.resetList(t,o,e)))},event:t})},l.prototype.setSearchBox=function(t){if(this.isFiltering()){var n=i.createElement("span",{className:e.dropDownListClasses.filterParent});this.filterInput=i.createElement("input",{attrs:{type:"text"},className:e.dropDownListClasses.filterInput}),this.element.parentNode.insertBefore(this.filterInput,this.element);var l=!1;o.Browser.isDevice&&(l=!0);var a=p.Input.createInput({element:this.filterInput,buttons:l?[e.dropDownListClasses.backIcon,e.dropDownListClasses.filterBarClearIcon]:[e.dropDownListClasses.filterBarClearIcon],properties:{placeholder:this.filterBarPlaceholder}});return i.append([a.container],n),r.prepend([n],t),s.attributes(this.filterInput,{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-activedescendant":this.selectedLI?this.selectedLI.id:null,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}),this.clearIconElement=this.filterInput.parentElement.querySelector("."+e.dropDownListClasses.clearIcon),!o.Browser.isDevice&&this.clearIconElement&&(i.EventHandler.add(this.clearIconElement,"click",this.clearText,this),this.clearIconElement.style.visibility="hidden"),o.Browser.isDevice||(this.searchKeyModule=new i.KeyboardEvents(this.filterInput,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"})),i.EventHandler.add(this.filterInput,"input",this.onInput,this),i.EventHandler.add(this.filterInput,"keyup",this.onFilterUp,this),i.EventHandler.add(this.filterInput,"keydown",this.onFilterDown,this),i.EventHandler.add(this.filterInput,"blur",this.onBlur,this),a}return c},l.prototype.onInput=function(){this.isValidKey=!0},l.prototype.onActionFailure=function(e){t.prototype.onActionFailure.call(this,e),this.renderPopup()},l.prototype.onActionComplete=function(e,i,o,n){if(this.isNotSearchList)return void(this.isNotSearchList=!1);if(this.isActive){var l=this.selectedLI?this.selectedLI.cloneNode(!0):null;t.prototype.onActionComplete.call(this,e,i,o),this.isRequested&&!s.isNullOrUndefined(this.searchKeyEvent)&&"keydown"===this.searchKeyEvent.type&&(this.isRequested=!1,this.keyActionHandler(this.searchKeyEvent),this.searchKeyEvent=null),this.isRequested&&!s.isNullOrUndefined(this.searchKeyEvent)&&(this.incrementalSearch(this.searchKeyEvent),this.searchKeyEvent=null),this.list.scrollTop=0,s.isNullOrUndefined(e)||s.attributes(e,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false"}),this.initRemoteRender&&(this.initial=!0,this.activeIndex=this.index,this.updateValues(),this.initRemoteRender=!1,this.initial=!1),"autocomplete"!==this.getModuleName()&&this.isFiltering()&&!this.isTyped&&(this.actionCompleteData.isUpdated||(this.actionCompleteData={ulElement:e.cloneNode(!0),list:i,isUpdated:!0}),this.addNewItem(i,l),s.isNullOrUndefined(this.itemData)||this.focusIndexItem()),this.beforePopupOpen&&this.renderPopup()}},l.prototype.addNewItem=function(t,e){var i=this;if(!s.isNullOrUndefined(this.itemData)&&!s.isNullOrUndefined(e)){var o=this.getItemData().value;t.some(function(t){return t[i.fields.value]===o})||(this.addItem(this.itemData),this.actionCompleteData.list.push(this.itemData),this.actionCompleteData.ulElement.appendChild(e));var n=void 0;n=this.actionCompleteData.ulElement.querySelectorAll("."+u.dropDownBaseClasses.selected),n.length&&(r.removeClass(n,u.dropDownBaseClasses.selected),n[0].removeAttribute("aria-selected"))}},l.prototype.focusIndexItem=function(){var t=this.getItemData().value;this.activeIndex=this.getIndexByValue(t);var e=this.list.querySelector('[data-value="'+t+'"]');this.selectedLI=e,this.activeItem(e),this.removeFocus()},l.prototype.updateSelection=function(){var t=this.list.querySelector("."+u.dropDownBaseClasses.selected);t?(this.setProperties({index:this.getIndexByValue(t.getAttribute("data-value"))}),this.activeIndex=this.index):(this.removeFocus(),this.list.querySelector("."+u.dropDownBaseClasses.li).classList.add(e.dropDownListClasses.focus))},l.prototype.removeFocus=function(){var t=this.list.querySelectorAll("."+e.dropDownListClasses.focus);t&&t.length&&r.removeClass(t,e.dropDownListClasses.focus)},l.prototype.renderPopup=function(){if(this.popupObj&&document.body.contains(this.popupObj.element))return void this.refreshPopup();var t=i.createElement("div",{id:this.element.id+"_popup",className:"e-ddl e-popup"}),n=this.setSearchBox(t);if(this.listHeight=s.formatUnit(this.popupHeight),this.headerTemplate){var l=void 0;this.header=document.createElement("div"),r.addClass([this.header],e.dropDownListClasses.header),l=i.compile(this.headerTemplate);for(var a=0,p=l({});a<p.length;a++){var h=p[a];this.header.appendChild(h)}i.append([this.header],t)}if(i.append([this.list],t),this.footerTemplate&&this.setFooterTemplate(t),document.body.appendChild(t),t.style.visibility="hidden","auto"!==this.popupHeight){if(this.searchBoxHeight=0,s.isNullOrUndefined(n.container)||(this.searchBoxHeight=n.container.parentElement.getBoundingClientRect().height,this.listHeight=(parseInt(this.listHeight,10)-this.searchBoxHeight).toString()+"px"),this.headerTemplate){var u=Math.round(this.header.getBoundingClientRect().height);this.listHeight=(parseInt(this.listHeight,10)-(u+this.searchBoxHeight)).toString()+"px"}if(this.footerTemplate){var u=Math.round(this.footer.getBoundingClientRect().height);this.listHeight=(parseInt(this.listHeight,10)-(u+this.searchBoxHeight)).toString()+"px"}this.list.style.maxHeight=(parseInt(this.listHeight,10)-2).toString()+"px",t.style.maxHeight=s.formatUnit(this.popupHeight)}else t.style.height="auto";var d,c=0;if(!s.isNullOrUndefined(this.selectedLI)&&!s.isNullOrUndefined(this.activeIndex)&&this.activeIndex>=0?this.setScrollPosition():this.list.scrollTop=0,o.Browser.isDevice&&!this.allowFiltering&&("dropdownlist"===this.getModuleName()||this.isDropDownClick&&"combobox"===this.getModuleName())){c=this.getOffsetValue(t);var v=this.isEmptyList()?this.list:this.liCollections[0];d=-(parseInt(getComputedStyle(v).textIndent,10)-parseInt(getComputedStyle(this.inputElement).paddingLeft,10)+parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth,10))}this.getFocusElement(),this.createPopup(t,c,d),this.checkCollision(t),o.Browser.isDevice&&(this.popupObj.element.classList.add(e.dropDownListClasses.device),("dropdownlist"===this.getModuleName()||"combobox"===this.getModuleName()&&!this.allowFiltering&&this.isDropDownClick)&&(this.popupObj.collision={X:"none",Y:"fit"}),this.isFilterLayout()&&(this.popupObj.element.classList.add(e.dropDownListClasses.mobileFilter),this.popupObj.position={X:0,Y:0},this.popupObj.dataBind(),s.attributes(this.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),r.addClass([document.body,this.popupObj.element],e.dropDownListClasses.popupFullScreen),this.setSearchBoxPosition(),this.backIconElement=n.container.querySelector(".e-back-icon"),this.clearIconElement=n.container.querySelector("."+e.dropDownListClasses.clearIcon),i.EventHandler.add(this.backIconElement,"click",this.clickOnBackIcon,this),i.EventHandler.add(this.clearIconElement,"click",this.clearText,this))),t.style.visibility="visible",r.addClass([t],"e-popup-close");for(var m=this.popupObj.getScrollableParent(this.inputWrapper.container),f=0,y=m;f<y.length;f++){var g=y[f];i.EventHandler.add(g,"scroll",this.scrollHandler,this)}o.Browser.isDevice&&this.isFilterLayout()&&i.EventHandler.add(this.list,"scroll",this.listScroll,this),s.attributes(this.targetElement(),{"aria-expanded":"true"});var C=this.isFiltering()?this.filterInput.parentElement:this.inputWrapper.container;r.addClass([C],[e.dropDownListClasses.inputFocus]),r.addClass([this.inputWrapper.container],[e.dropDownListClasses.iconAnimation]);var b={name:"FadeIn",duration:100};this.beforePopupOpen=!0;var w={popup:this.popupObj};this.trigger("open",w),i.EventHandler.add(document,"mousedown",this.onDocumentClick,this),this.popupObj.show(new o.Animation(b))},l.prototype.checkCollision=function(t){if(!o.Browser.isDevice||o.Browser.isDevice&&"dropdownlist"!==this.getModuleName()&&!this.isDropDownClick){var e=a.isCollide(t);e.length>0&&"bottom"===e[0]&&(t.style.marginTop=-parseInt(getComputedStyle(t).marginTop,10)+"px")}},l.prototype.getOffsetValue=function(t){var e=getComputedStyle(t),i=parseInt(e.borderTop,10),s=parseInt(e.borderBottom,10);return this.setPopupPosition(i+s)},l.prototype.createPopup=function(t,i,s){var o=this;this.popupObj=new a.Popup(t,{width:this.setWidth(),targetType:"relative",relateTo:this.inputWrapper.container,collision:{X:"none",Y:"flip"},offsetY:i,enableRtl:this.enableRtl,offsetX:s,position:{X:"left",Y:"bottom"},close:function(){o.isDocumentClick||o.focusDropDown(),o.isDocumentClick=!1,o.destroyPopup()},open:function(){o.isPopupOpen=!0,o.isFilterLayout()&&(r.removeClass([o.inputWrapper.container],[e.dropDownListClasses.inputFocus]),o.isFilterFocus=!0,o.filterInput.focus(),o.inputWrapper.clearButton&&r.addClass([o.inputWrapper.clearButton],e.dropDownListClasses.clearIconHide)),o.activeStateChange()}})},l.prototype.isEmptyList=function(){return!s.isNullOrUndefined(this.liCollections)&&0===this.liCollections.length},l.prototype.getFocusElement=function(){},l.prototype.isFilterLayout=function(){return"dropdownlist"===this.getModuleName()&&this.allowFiltering},l.prototype.scrollHandler=function(){o.Browser.isDevice&&("dropdownlist"===this.getModuleName()&&!this.isFilterLayout()||"combobox"===this.getModuleName()&&!this.allowFiltering&&this.isDropDownClick)&&this.hidePopup()},l.prototype.setSearchBoxPosition=function(){var t=this.filterInput.parentElement.getBoundingClientRect().height;this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%",this.list.style.maxHeight=window.innerHeight-t+"px",this.list.style.height=window.innerHeight-t+"px";var i=this.filterInput.parentElement.querySelector("."+e.dropDownListClasses.clearIcon);r.detach(this.filterInput),i.parentElement.insertBefore(this.filterInput,i)},l.prototype.setPopupPosition=function(t){var i,o=t,n=this.list.querySelector("."+e.dropDownListClasses.focus)||this.selectedLI,l=this.isEmptyList()?this.list:this.liCollections[0],r=this.isEmptyList()?this.list:this.liCollections[this.getItems().length-1],a=l.getBoundingClientRect().height,p=this.list.offsetHeight/2,h=s.isNullOrUndefined(n)?l.offsetTop:n.offsetTop;if(r.offsetTop-p<h&&!s.isNullOrUndefined(this.liCollections)&&this.liCollections.length>0&&!s.isNullOrUndefined(n)){var u=this.list.offsetHeight/a,d=parseInt(getComputedStyle(this.list).paddingBottom,10);i=(u-(this.liCollections.length-this.activeIndex))*a-o+d,this.list.scrollTop=n.offsetTop}else h>p?(i=p-a/2,this.list.scrollTop=h-p+a/2):i=h;return-(i=i+a+o-(a-this.inputWrapper.container.offsetHeight)/2)},l.prototype.setWidth=function(){var t=s.formatUnit(this.popupWidth);if(t.indexOf("%")>-1){t=(this.inputWrapper.container.offsetWidth*parseFloat(t)/100).toString()+"px"}if(o.Browser.isDevice&&!this.allowFiltering&&("dropdownlist"===this.getModuleName()||this.isDropDownClick&&"combobox"===this.getModuleName())){var e=this.isEmptyList()?this.list:this.liCollections[0];t=parseInt(t,10)+2*(parseInt(getComputedStyle(e).textIndent,10)-parseInt(getComputedStyle(this.inputElement).paddingLeft,10)+parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth,10))+"px"}return t},l.prototype.scrollBottom=function(t){var e=this.list.offsetHeight,i=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop,o=this.list.scrollTop+i-e;o=t?o+2*parseInt(getComputedStyle(this.list).paddingTop,10):o;var n=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;n=this.fields.groupBy&&!s.isNullOrUndefined(this.fixedHeaderElement)?n-this.fixedHeaderElement.offsetHeight:n,0===this.activeIndex?this.list.scrollTop=0:(i>e||!(n>0&&this.list.offsetHeight>n))&&(this.list.scrollTop=o)},l.prototype.scrollTop=function(){var t=this.selectedLI.offsetTop-this.list.scrollTop;this.selectedLI.offsetTop,this.selectedLI.offsetHeight,this.list.scrollTop;t=this.fields.groupBy&&!s.isNullOrUndefined(this.fixedHeaderElement)?t-this.fixedHeaderElement.offsetHeight:t;var e=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;0===this.activeIndex?this.list.scrollTop=0:t<0?this.list.scrollTop=this.list.scrollTop+t:e>0&&this.list.offsetHeight>e||(this.list.scrollTop=this.selectedLI.offsetTop-(this.fields.groupBy&&!s.isNullOrUndefined(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))},l.prototype.isEditTextBox=function(){return!1},l.prototype.isFiltering=function(){return this.allowFiltering},l.prototype.isPopupButton=function(){return!0},l.prototype.setScrollPosition=function(t){if(s.isNullOrUndefined(t))this.scrollBottom(!0);else switch(t.action){case"pageDown":case"down":case"end":this.scrollBottom();break;default:this.scrollTop()}},l.prototype.clearText=function(){this.filterInput.value="",this.searchLists(null)},l.prototype.listScroll=function(){this.filterInput.blur()},l.prototype.closePopup=function(t){if(this.isTyped=!1,this.popupObj&&document.body.contains(this.popupObj.element)){i.EventHandler.remove(document,"mousedown",this.onDocumentClick),this.isActive=!1,this.isDropDownClick=!1,this.preventAutoFill=!1;for(var n=this.popupObj.getScrollableParent(this.inputWrapper.container),l=0,a=n;l<a.length;l++){var p=a[l];i.EventHandler.remove(p,"scroll",this.scrollHandler)}o.Browser.isDevice&&this.isFilterLayout()&&(r.removeClass([document.body,this.popupObj.element],e.dropDownListClasses.popupFullScreen),i.EventHandler.remove(this.list,"scroll",this.listScroll)),this.isFilterLayout()&&(o.Browser.isDevice||(this.searchKeyModule.destroy(),this.clearIconElement&&i.EventHandler.remove(this.clearIconElement,"click",this.clearText)),this.backIconElement&&(i.EventHandler.remove(this.backIconElement,"click",this.clickOnBackIcon),i.EventHandler.remove(this.clearIconElement,"click",this.clearText)),i.EventHandler.remove(this.filterInput,"input",this.onInput),i.EventHandler.remove(this.filterInput,"keyup",this.onFilterUp),i.EventHandler.remove(this.filterInput,"keydown",this.onFilterDown),i.EventHandler.remove(this.filterInput,"blur",this.onBlur),this.filterInput=null),s.attributes(this.targetElement(),{"aria-expanded":"false","aria-activedescendant":null}),this.inputWrapper.container.classList.remove(e.dropDownListClasses.iconAnimation),this.isFiltering()&&(this.actionCompleteData.isUpdated=!1),this.beforePopupOpen=!1;var h={popup:this.popupObj};this.trigger("close",h);var u={name:"FadeOut",duration:100,delay:t||0};"autocomplete"===this.getModuleName()&&this.rippleFun(),this.isPopupOpen?this.popupObj.hide(new o.Animation(u)):this.destroyPopup()}},l.prototype.destroyPopup=function(){this.isPopupOpen=!1,this.isFilterFocus=!1,this.popupObj.destroy(),r.detach(this.popupObj.element)},l.prototype.clickOnBackIcon=function(){this.hidePopup(),this.focusIn()},l.prototype.render=function(){"INPUT"===this.element.tagName?this.inputElement=this.element:(this.inputElement=i.createElement("input"),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.parentElement.insertBefore(this.inputElement,this.element),this.preventTabIndex(this.inputElement)),this.inputWrapper=p.Input.createInput({element:this.inputElement,buttons:this.isPopupButton()?[e.dropDownListClasses.icon]:null,floatLabelType:this.floatLabelType,properties:{readonly:"dropdownlist"===this.getModuleName()||this.readonly,placeholder:this.placeholder,cssClass:this.cssClass,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton}}),this.element.tagName===this.getNgDirective()?this.element.appendChild(this.inputWrapper.container):this.inputElement.parentElement.insertBefore(this.element,this.inputElement);var t=this.element.getAttribute("name")?this.element.getAttribute("name"):this.element.getAttribute("id");this.hiddenElement=i.createElement("select",{attrs:{name:t,"aria-hidden":"true"},styles:"display:none"}),r.prepend([this.hiddenElement],this.inputWrapper.container),this.element.removeAttribute("name"),this.setFields(),this.inputWrapper.container.style.width=s.formatUnit(this.width),this.inputWrapper.container.classList.add("e-ddl"),this.wireEvent(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex");var o=this.element.getAttribute("id")?this.element.getAttribute("id"):s.getUniqueID("ej2_dropdownlist");if(this.element.id=o,this.targetElement().setAttribute("tabindex",this.tabIndex),s.attributes(this.targetElement(),this.getAriaAttributes()),this.setHTMLAttributes(),null!==this.value||null!==this.activeIndex||null!==this.text)this.initValue();else if("SELECT"===this.element.tagName&&this.element.options[0]){var n=this.element;this.value=n.options[n.selectedIndex].value,this.text=s.isNullOrUndefined(this.value)?null:n.options[n.selectedIndex].textContent,this.initValue()}this.preventTabIndex(this.element),this.enabled||(this.targetElement().tabIndex=-1),this.initial=!1,this.element.style.opacity=""},l.prototype.setFooterTemplate=function(t){var s;this.footer?this.footer.innerHTML="":(this.footer=document.createElement("div"),r.addClass([this.footer],e.dropDownListClasses.footer)),s=i.compile(this.footerTemplate);for(var o=0,n=s({});o<n.length;o++){var l=n[o];this.footer.appendChild(l)}i.append([this.footer],t)},l.prototype.setOldText=function(t){this.text=t},l.prototype.setOldValue=function(t){this.value=t},l.prototype.refreshPopup=function(){s.isNullOrUndefined(this.popupObj)||!document.body.contains(this.popupObj.element)||(!this.allowFiltering||o.Browser.isDevice&&this.isFilterLayout())&&"autocomplete"!==this.getModuleName()||this.popupObj.refreshPosition()},l.prototype.onPropertyChanged=function(e,i){for(var o=0,n=Object.keys(e);o<n.length;o++){var l=n[o];switch(l){case"htmlAttributes":this.setHTMLAttributes();break;case"width":r.setStyleAttribute(this.inputWrapper.container,{width:s.formatUnit(e.width)});break;case"placeholder":p.Input.setPlaceholder(e.placeholder,this.inputElement);break;case"filterBarPlaceholder":p.Input.setPlaceholder(e.filterBarPlaceholder,this.filterInput);break;case"readonly":p.Input.setReadonly(e.readonly,this.inputElement);break;case"cssClass":p.Input.setCssClass(e.cssClass,[this.inputWrapper.container]),this.popupObj&&this.popupObj.element.classList.add(e.cssClass);break;case"enableRtl":this.setEnableRtl();break;case"enabled":this.setEnable();break;case"text":if(null===e.text)return void this.clear();if(this.list||(this.dataSource instanceof d.DataManager&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender){var a=this.getElementByText(e.text);this.isValidLI(a)?this.setSelection(a,null):this.setOldText(i.text)}break;case"value":if(null===e.value)return void this.clear();if(this.list||(this.dataSource instanceof d.DataManager&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender){var h=this.getElementByValue(e.value);this.isValidLI(h)?this.setSelection(h,null):this.setOldValue(i.value)}break;case"index":if(null===e.index)return void this.clear();if(this.list||(this.dataSource instanceof d.DataManager&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender){var u=this.liCollections[e.index];this.isValidLI(u)?this.setSelection(u,null):this.index=i.index}break;case"query":case"dataSource":this.clear(),this.resetList(this.dataSource);break;case"footerTemplate":this.popupObj&&this.setFooterTemplate(this.popupObj.element);break;case"floatLabelType":p.Input.removeFloating(this.inputWrapper),p.Input.addFloating(this.inputElement,e.floatLabelType,this.placeholder);break;default:var c=void 0;c=this.getPropObject(l,e,i),t.prototype.onPropertyChanged.call(this,c.newProperty,c.oldProperty)}}},l.prototype.getModuleName=function(){return"dropdownlist"},l.prototype.showPopup=function(){if(this.beforePopupOpen)return void this.refreshPopup();if(this.beforePopupOpen=!0,this.isFiltering()&&!this.isActive&&this.actionCompleteData.list&&this.actionCompleteData.list[0]?(this.isActive=!0,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)):(s.isNullOrUndefined(this.list)||!s.isUndefined(this.list)&&this.list.classList.contains(u.dropDownBaseClasses.noData))&&this.renderList(),o.Browser.isDevice&&this.isFilterLayout()){var t=this;window.onpopstate=function(){t.hidePopup()},history.pushState({},"")}s.isNullOrUndefined(this.list.children[0])&&!this.list.classList.contains(u.dropDownBaseClasses.noData)||this.renderPopup(),s.attributes(this.targetElement(),{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null})},l.prototype.hidePopup=function(){this.isEscapeKey&&"dropdownlist"===this.getModuleName()&&(p.Input.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1,s.isNullOrUndefined(this.index)?this.resetSelection():(this.selectedLI=this.liCollections[this.index],this.updateSelectedItem(this.selectedLI,null,!0),this.valueTemplate&&null!==this.itemData&&this.setValueTemplate())),this.closePopup();var t=this.getItemData();""!==this.inputElement.value.trim()||this.isInteracted||!this.isSelectCustom&&(s.isNullOrUndefined(this.selectedLI)||this.inputElement.value===t.text)||(this.isSelectCustom=!1,this.clear())},l.prototype.focusIn=function(){if(!this.targetElement().classList.contains(e.dropDownListClasses.disable)){var t=!1;this.preventFocus&&o.Browser.isDevice&&(this.inputWrapper.container.tabIndex=1,this.inputWrapper.container.focus(),this.preventFocus=!1,t=!0),t||this.targetElement().focus(),r.addClass([this.inputWrapper.container],[e.dropDownListClasses.inputFocus]),this.onFocus()}},l.prototype.focusOut=function(){this.isTyped=!0,this.hidePopup(),this.targetElement().blur(),r.removeClass([this.inputWrapper.container],[e.dropDownListClasses.inputFocus])},l.prototype.destroy=function(){var e=this;this.isActive=!1,this.hidePopup(),this.unWireEvent(),this.list&&this.unWireListEvents(),["readonly","aria-disabled","aria-placeholder","placeholder"].forEach(function(t){e.inputElement.removeAttribute(t)}),this.inputElement.setAttribute("tabindex",this.tabIndex),this.inputElement.classList.remove("e-input"),p.Input.setValue("",this.inputElement,this.floatLabelType,this.showClearButton),this.element.style.display="block",this.inputWrapper.container.parentElement.tagName===this.getNgDirective()?r.detach(this.inputWrapper.container):(this.inputWrapper.container.parentElement.insertBefore(this.element,this.inputWrapper.container),r.detach(this.inputWrapper.container)),t.prototype.destroy.call(this)},l}(u.DropDownBase);l([i.Property(null)],v.prototype,"cssClass",void 0),l([i.Property("100%")],v.prototype,"width",void 0),l([i.Property("300px")],v.prototype,"popupHeight",void 0),l([i.Property("100%")],v.prototype,"popupWidth",void 0),l([i.Property(null)],v.prototype,"placeholder",void 0),l([i.Property(null)],v.prototype,"filterBarPlaceholder",void 0),l([i.Property({})],v.prototype,"htmlAttributes",void 0),l([i.Property(null)],v.prototype,"query",void 0),l([i.Property(null)],v.prototype,"valueTemplate",void 0),l([i.Property(null)],v.prototype,"headerTemplate",void 0),l([i.Property(null)],v.prototype,"footerTemplate",void 0),l([i.Property(!1)],v.prototype,"allowFiltering",void 0),l([i.Property(!1)],v.prototype,"readonly",void 0),l([i.Property(null)],v.prototype,"text",void 0),l([i.Property(null)],v.prototype,"value",void 0),l([i.Property(null)],v.prototype,"index",void 0),l([i.Property("Never")],v.prototype,"floatLabelType",void 0),l([i.Property(!1)],v.prototype,"showClearButton",void 0),l([i.Event()],v.prototype,"filtering",void 0),l([i.Event()],v.prototype,"change",void 0),l([i.Event()],v.prototype,"open",void 0),l([i.Event()],v.prototype,"close",void 0),l([i.Event()],v.prototype,"blur",void 0),l([i.Event()],v.prototype,"focus",void 0),v=l([o.NotifyPropertyChanges],v),e.DropDownList=v}.apply(e,s))&&(t.exports=o)},function(t,e){t.exports=s},function(t,e){t.exports=o},function(t,e,i){var s,o;s=[i,e,i(14)],void 0!==(o=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}(i)}.apply(e,s))&&(t.exports=o)},function(t,e,i){
var s,o,n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),l=this&&this.__decorate||function(t,e,i,s){var o,n=arguments.length,l=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,i,s);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(l=(n<3?o(l):n>3?o(e,i,l):o(e,i))||l);return n>3&&l&&Object.defineProperty(e,i,l),l};s=[i,e,i(6),i(6),i(10),i(2),i(12)],void 0!==(o=function(t,e,i,s,o,r,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),o.dropDownListClasses.root="e-combobox";var p={container:null,buttons:[]},h=function(t){function e(e,i){return t.call(this,e,i)||this}return n(e,t),e.prototype.preRender=function(){t.prototype.preRender.call(this)},e.prototype.wireEvent=function(){"combobox"===this.getModuleName()&&(i.EventHandler.add(this.inputWrapper.buttons[0],"mousedown",this.preventBlur,this),i.EventHandler.add(this.inputWrapper.container,"blur",this.onBlur,this)),s.isNullOrUndefined(this.inputWrapper.buttons[0])||i.EventHandler.add(this.inputWrapper.buttons[0],"mousedown",this.dropDownClick,this),i.EventHandler.add(this.inputElement,"focus",this.targetFocus,this),this.readonly||(i.EventHandler.add(this.inputElement,"input",this.onInput,this),i.EventHandler.add(this.inputElement,"keyup",this.onFilterUp,this),i.EventHandler.add(this.inputElement,"keydown",this.onFilterDown,this)),this.bindCommonEvent()},e.prototype.preventBlur=function(t){(this.allowFiltering||document.activeElement===this.inputElement||document.activeElement.classList.contains(o.dropDownListClasses.input)||!i.Browser.isDevice)&&i.Browser.isDevice||t.preventDefault()},e.prototype.targetElement=function(){return this.inputElement},e.prototype.setOldText=function(t){a.Input.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.customValue(),this.removeSelection()},e.prototype.setOldValue=function(t){this.allowCustom?this.valueMuteChange(this.value):this.valueMuteChange(null),this.removeSelection(),this.setHiddenValue()},e.prototype.valueMuteChange=function(t){var e=s.isNullOrUndefined(t)?null:t.toString();a.Input.setValue(e,this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({value:t,text:t,index:null},!0),this.activeIndex=this.index;var i=this.fields,o={};o[i.text]=s.isNullOrUndefined(t)?null:t.toString(),o[i.value]=s.isNullOrUndefined(t)?null:t.toString(),this.itemData=o,this.item=null,this.previousValue!==this.value&&this.detachChangeEvent(null)},e.prototype.updateValues=function(){if(s.isNullOrUndefined(this.value))if(this.text&&s.isNullOrUndefined(this.value)){var t=this.getElementByText(this.text);t?this.setSelection(t,null):(a.Input.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.customValue())}else this.setSelection(this.liCollections[this.activeIndex],null);else{var t=this.getElementByValue(this.value);t?this.setSelection(t,null):this.allowCustom?this.valueMuteChange(this.value):this.valueMuteChange(null)}this.setHiddenValue(),a.Input.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},e.prototype.getAriaAttributes=function(){return{"aria-owns":this.element.id+"_options",role:"combobox","aria-autocomplete":"both","aria-hasPopup":"true","aria-expanded":"false","aria-readonly":this.readonly.toString(),autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}},e.prototype.searchLists=function(e){this.isTyped=!0,this.isFiltering()?(t.prototype.searchLists.call(this,e),""===this.filterInput.value.trim()&&this.setHoverList(this.ulElement.querySelector("."+o.dropDownListClasses.li))):(this.ulElement&&""===this.inputElement.value&&this.preventAutoFill&&this.setHoverList(this.ulElement.querySelector("."+o.dropDownListClasses.li)),this.incrementalSearch(e))},e.prototype.getNgDirective=function(){return"EJ-COMBOBOX"},e.prototype.setSearchBox=function(){return this.filterInput=this.inputElement,this.isFiltering()?this.inputWrapper:p},e.prototype.onActionComplete=function(e,i,s,o){t.prototype.onActionComplete.call(this,e,i,s),this.isSelectCustom&&this.removeSelection(),!this.preventAutoFill&&"combobox"===this.getModuleName()&&this.isTyped&&this.inlineSearch()},e.prototype.getFocusElement=function(){var t=this.isSelectCustom?{text:""}:this.getItemData(),e=this.list.querySelector("."+o.dropDownListClasses.selected);if(t.text===this.inputElement.value&&!s.isNullOrUndefined(e))return e;if((i.Browser.isDevice&&!this.isDropDownClick||!i.Browser.isDevice)&&!s.isNullOrUndefined(this.liCollections)&&this.liCollections.length>0){var n=this.inputElement.value,l=r.Search(n,this.liCollections,"StartsWith",!0),a=l.item;if(s.isNullOrUndefined(a))this.isSelectCustom&&""!==this.inputElement.value.trim()&&(this.removeFocus(),this.list.scrollTop=0);else{var p=this.getIndexByValue(a.getAttribute("data-value"))-1,h=parseInt(getComputedStyle(this.liCollections[0],null).getPropertyValue("height"),10);if(!isNaN(h)&&"autocomplete"!==this.getModuleName()){var u=this.fields.groupBy?this.liCollections[0].offsetHeight:0;this.list.scrollTop=p*h+u,i.addClass([a],o.dropDownListClasses.focus)}}return a}return null},e.prototype.setValue=function(e){return e&&"keydown"===e.type&&"enter"===e.action&&this.removeFillSelection(),this.autofill&&"combobox"===this.getModuleName()&&e&&"keydown"===e.type&&"enter"!==e.action?(this.preventAutoFill=!1,this.inlineSearch(e),!1):t.prototype.setValue.call(this,e)},e.prototype.setAutoFill=function(t,e){if(e||this.setHoverList(t),this.autofill&&!this.preventAutoFill){var i=this.getTextByValue(t.getAttribute("data-value")).toString(),s=this.getFormattedValue(t.getAttribute("data-value"));"combobox"===this.getModuleName()&&(this.isSelected||this.previousValue===s?this.updateSelectedItem(t,null,!0):(this.updateSelectedItem(t,null),this.isSelected=!0,this.previousValue=this.getFormattedValue(t.getAttribute("data-value")))),this.isAndroidAutoFill(i)||this.setAutoFillSelection(i)}},e.prototype.isAndroidAutoFill=function(t){if(i.Browser.isAndroid){var e=this.getSelectionPoints(),s=this.prevSelectPoints.end,o=e.end,n=this.prevSelectPoints.start,l=e.start;return 0!==s&&(s===t.length&&n===t.length||n>l&&s>o||s===o&&n===l)}return!1},e.prototype.isSelectFocusItem=function(t){return!s.isNullOrUndefined(t)},e.prototype.inlineSearch=function(t){var e=t&&("down"===t.action||"up"===t.action||"home"===t.action||"end"===t.action||"pageUp"===t.action||"pageDown"===t.action),i=e?this.liCollections[this.activeIndex]:this.getFocusElement();if(s.isNullOrUndefined(i))if(""===this.inputElement.value){this.activeIndex=null,this.list.scrollTop=0;var n=this.list.querySelector("."+o.dropDownListClasses.li);this.setHoverList(n)}else this.activeIndex=null,this.removeSelection(),this.removeFocus();else{if(!e){var l=this.getFormattedValue(i.getAttribute("data-value"));this.activeIndex=this.getIndexByValue(l),this.activeIndex=s.isNullOrUndefined(this.activeIndex)?null:this.activeIndex}this.preventAutoFill=""!==this.inputElement.value&&this.preventAutoFill,this.setAutoFill(i,e)}},e.prototype.incrementalSearch=function(t){this.showPopup(),s.isNullOrUndefined(this.listData)||(this.inlineSearch(t),t.preventDefault())},e.prototype.setAutoFillSelection=function(t){var e=this.getSelectionPoints(),i=this.inputElement.value.substr(0,e.start);if(i&&i.toLowerCase()===t.substr(0,e.start).toLowerCase()){var s=i+t.substr(i.length,t.length);a.Input.setValue(s,this.inputElement,this.floatLabelType,this.showClearButton),this.inputElement.setSelectionRange(e.start,this.inputElement.value.length)}else a.Input.setValue(t,this.inputElement,this.floatLabelType,this.showClearButton),this.inputElement.setSelectionRange(0,this.inputElement.value.length)},e.prototype.getValueByText=function(e){return t.prototype.getValueByText.call(this,e,!0)},e.prototype.unWireEvent=function(){"combobox"===this.getModuleName()&&(i.EventHandler.remove(this.inputWrapper.buttons[0],"mousedown",this.preventBlur),i.EventHandler.remove(this.inputWrapper.container,"blur",this.onBlur)),s.isNullOrUndefined(this.inputWrapper.buttons[0])||i.EventHandler.remove(this.inputWrapper.buttons[0],"mousedown",this.dropDownClick),i.EventHandler.remove(this.inputElement,"focus",this.targetFocus),this.readonly||(i.EventHandler.remove(this.inputElement,"input",this.onInput),i.EventHandler.remove(this.inputElement,"keyup",this.onFilterUp),i.EventHandler.remove(this.inputElement,"keydown",this.onFilterDown)),this.unBindCommonEvent()},e.prototype.setSelection=function(e,i){t.prototype.setSelection.call(this,e,i),s.isNullOrUndefined(e)||this.autofill||this.isDropDownClick||this.removeFocus()},e.prototype.selectCurrentItem=function(t){var e;this.isPopupOpen&&(e=this.list.querySelector("."+o.dropDownListClasses.focus),e&&(this.setSelection(e,t),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(t))),this.isTyped&&!this.isSelected&&s.isNullOrUndefined(e)&&this.customValue(),this.hidePopup()},e.prototype.setHoverList=function(t){this.removeSelection(),this.isValidLI(t)&&!t.classList.contains(o.dropDownListClasses.selected)&&(this.removeFocus(),t.classList.add(o.dropDownListClasses.focus))},e.prototype.targetFocus=function(t){i.Browser.isDevice&&!this.allowFiltering&&(this.preventFocus=!1),this.onFocus()},e.prototype.dropDownClick=function(e){i.Browser.isDevice&&!this.allowFiltering&&(this.preventFocus=!0),t.prototype.dropDownClick.call(this,e)},e.prototype.customValue=function(){var t=this.getValueByText(this.inputElement.value);if(this.allowCustom||""===this.inputElement.value){if(""!==this.inputElement.value.trim()){var e=this.value;if(s.isNullOrUndefined(t)){var i=""===this.inputElement.value?null:this.inputElement.value,o=this.fields,n=void 0;n={text:i,item:{}},this.initial||this.trigger("customValueSpecifier",n);var l=n.item,r={};l&&l[o.text]&&l[o.value]?r=l:(r[o.text]=i,r[o.value]=i),this.itemData=r,this.setProperties({text:this.itemData[o.text],value:this.itemData[o.value],index:null},!0),this.setSelection(null,null),this.isSelectCustom=!0}else this.isSelectCustom=!1,this.setProperties({value:t});e!==this.value&&this.onChangeEvent(null)}}else this.setProperties({value:t}),s.isNullOrUndefined(this.value)&&a.Input.setValue("",this.inputElement,this.floatLabelType,this.showClearButton)},e.prototype.onPropertyChanged=function(e,s){for(var o=0,n=Object.keys(e);o<n.length;o++){var l=n[o];switch(l){case"readonly":a.Input.setReadonly(this.readonly,this.inputElement),this.readonly?(i.EventHandler.remove(this.inputElement,"keyup",this.onFilterUp),i.EventHandler.remove(this.inputElement,"keydown",this.onFilterDown)):(i.EventHandler.add(this.inputElement,"keyup",this.onFilterUp,this),i.EventHandler.add(this.inputElement,"keydown",this.onFilterDown,this));break;case"allowFiltering":this.setSearchBox();break;case"allowCustom":break;default:var r=void 0;r=this.getPropObject(l,e,s),t.prototype.onPropertyChanged.call(this,r.newProperty,r.oldProperty)}}},e.prototype.render=function(){t.prototype.render.call(this),this.setSearchBox(),this.isFiltering()&&"combobox"===this.getModuleName()&&s.isNullOrUndefined(this.list)&&t.prototype.renderList.call(this)},e.prototype.getModuleName=function(){return"combobox"},e.prototype.hidePopup=function(){if(!s.isNullOrUndefined(this.listData)){var e=this.isEscapeKey;this.isEscapeKey&&(a.Input.setValue(this.typedString,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1),this.autofill&&this.removeFillSelection();var i=this.isSelectCustom?{text:""}:this.getItemData(),n=this.list.querySelector("."+o.dropDownListClasses.selected);if(i.text===this.inputElement.value&&!s.isNullOrUndefined(n))return this.isSelected&&(this.onChangeEvent(null),this.isSelectCustom=!1),void t.prototype.hidePopup.call(this);if("combobox"===this.getModuleName()&&""!==this.inputElement.value.trim()){var l=r.Search(this.inputElement.value,this.liCollections,"Equal",!0);this.selectedLI=l.item,s.isNullOrUndefined(l.index)&&(l.index=r.Search(this.inputElement.value,this.liCollections,"StartsWith",!0).index),this.activeIndex=l.index,s.isNullOrUndefined(this.selectedLI)?e&&(this.isSelectCustom=!0,this.removeSelection()):this.updateSelectedItem(this.selectedLI,null,!0)}this.isEscapeKey||!this.isTyped||this.isInteracted||this.customValue()}t.prototype.hidePopup.call(this)},e.prototype.focusIn=function(){i.Browser.isDevice&&!this.allowFiltering&&(this.preventFocus=!0),t.prototype.focusIn.call(this)},e}(o.DropDownList);l([i.Property(!1)],h.prototype,"autofill",void 0),l([i.Property(!0)],h.prototype,"allowCustom",void 0),l([i.Property({})],h.prototype,"htmlAttributes",void 0),l([i.Property(!1)],h.prototype,"allowFiltering",void 0),l([i.Property(null)],h.prototype,"query",void 0),l([i.Property(!0)],h.prototype,"showClearButton",void 0),l([i.Event()],h.prototype,"customValueSpecifier",void 0),l([i.Event()],h.prototype,"filtering",void 0),l([i.Property(null)],h.prototype,"valueTemplate",void 0),l([i.Property(null)],h.prototype,"filterBarPlaceholder",void 0),h=l([s.NotifyPropertyChanges],h),e.ComboBox=h}.apply(e,s))&&(t.exports=o)},function(t,e,i){var s,o;s=[i,e,i(16)],void 0!==(o=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}(i)}.apply(e,s))&&(t.exports=o)},function(t,e,i){var s,o,n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),l=this&&this.__decorate||function(t,e,i,s){var o,n=arguments.length,l=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,i,s);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(l=(n<3?o(l):n>3?o(e,i,l):o(e,i))||l);return n>3&&l&&Object.defineProperty(e,i,l),l};s=[i,e,i(6),i(6),i(10),i(14),i(3),i(2),i(12),i(7)],void 0!==(o=function(t,e,i,s,o,r,a,p,h,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),o.dropDownListClasses.root="e-autocomplete",o.dropDownListClasses.icon="e-input-group-icon e-ddl-icon e-search-icon";var d=function(t){function e(e,i){var s=t.call(this,e,i)||this;return s.isFiltered=!1,s}return n(e,t),e.prototype.preRender=function(){t.prototype.preRender.call(this)},e.prototype.getNgDirective=function(){return"EJ-AUTOCOMPLETE"},e.prototype.getQuery=function(t){var e=t||(this.query?this.query.clone():new u.Query);if(this.isFiltered)return e;if(null!==this.queryString)if((this.dataSource instanceof u.DataManager||"string"!=typeof this.dataSource[0])&&"number"!=typeof this.dataSource[0]){var s=this.fields;e.where(i.isNullOrUndefined(s.value)?"":s.value,this.filterType,this.queryString,this.ignoreCase)}else e.where("",this.filterType,this.queryString,this.ignoreCase);return i.isNullOrUndefined(this.suggestionCount)||e.take(this.suggestionCount),e},e.prototype.searchLists=function(e){var s=this;this.isTyped=!0,this.isSelectCustom=!1,i.isNullOrUndefined(this.list)&&t.prototype.renderList.call(this,!0);var o=40===e.keyCode||38===e.keyCode;if(this.queryString=this.filterInput.value,o)return this.queryString=""===this.queryString?null:this.queryString,this.beforePopupOpen=!0,void this.resetList(this.dataSource,this.fields);this.isSelected=!1,this.activeIndex=null;var n={preventDefaultAction:!1,text:this.filterInput.value,updateData:function(t,e,i){s.isFiltered=!0,s.filterAction(t,e,i)}};this.trigger("filtering",n),this.isFiltered||n.preventDefaultAction||this.filterAction(this.dataSource,null,this.fields)},e.prototype.filterAction=function(t,e,i){this.beforePopupOpen=!0,""!==this.queryString&&(this.queryString.length>=this.minLength||this.isFiltered)?this.resetList(t,i,e):this.hidePopup()},e.prototype.clear=function(){t.prototype.clear.call(this),this.beforePopupOpen&&this.hidePopup()},e.prototype.onActionComplete=function(e,n,l,r){this.fixedHeaderElement=null,t.prototype.onActionComplete.call(this,e,n,l);var a=this.list.querySelector("."+o.dropDownListClasses.li);i.isNullOrUndefined(a)||s.removeClass([a],o.dropDownListClasses.focus),this.postBackAction()},e.prototype.postBackAction=function(){if(null!==this.queryString&&""!==this.queryString&&this.highlight&&a.highlightSearch(this.list,this.queryString,this.ignoreCase,this.filterType),this.autofill&&!i.isNullOrUndefined(this.liCollections[0])){var e=[this.liCollections[0]],s=p.Search(this.inputElement.value,e,"StartsWith",this.ignoreCase);i.isNullOrUndefined(s.item)||t.prototype.setAutoFill.call(this,this.liCollections[0],!0)}},e.prototype.setSelection=function(e,o){if(this.isValidLI(e))if(!i.isNullOrUndefined(o)&&"keydown"===o.type&&"enter"!==o.action&&this.isValidLI(e)){var n=this.getFormattedValue(e.getAttribute("data-value"));this.activeIndex=this.getIndexByValue(n),this.setHoverList(e),this.selectedLI=e,this.setScrollPosition(o),this.autofill&&(this.preventAutoFill=!1,t.prototype.setAutoFill.call(this,e)),s.attributes(this.inputElement,{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null})}else t.prototype.setSelection.call(this,e,o)},e.prototype.isFiltering=function(){return!0},e.prototype.renderPopup=function(){this.list.scrollTop=0,t.prototype.renderPopup.call(this),this.highlight&&a.highlightSearch(this.list,this.queryString,this.ignoreCase,this.filterType)},e.prototype.isEditTextBox=function(){return!0},e.prototype.isPopupButton=function(){return this.showPopupButton},e.prototype.isSelectFocusItem=function(t){return!1},e.prototype.showPopup=function(){if(this.beforePopupOpen)return void this.refreshPopup();this.beforePopupOpen=!0,this.preventAutoFill=!0,i.isNullOrUndefined(this.list)?this.renderList():this.resetList(this.dataSource,this.fields)},e.prototype.hidePopup=function(){t.prototype.hidePopup.call(this),this.activeIndex=-1},e.prototype.onPropertyChanged=function(e,s){for(var n=0,l=Object.keys(e);n<l.length;n++){var r=l[n];switch(r){case"showPopupButton":if(this.showPopupButton){var a=h.Input.appendSpan(o.dropDownListClasses.icon,this.inputWrapper.container);this.inputWrapper.buttons[0]=a,i.EventHandler.add(this.inputWrapper.buttons[0],"click",this.dropDownClick,this)}else i.detach(this.inputWrapper.buttons[0]),this.inputWrapper.buttons[0]=null;break;default:var p=void 0;p=this.getPropObject(r,e,s),t.prototype.onPropertyChanged.call(this,p.newProperty,p.oldProperty)}}},e.prototype.getModuleName=function(){return"autocomplete"},e.prototype.render=function(){t.prototype.render.call(this)},e}(r.ComboBox);l([i.Property({value:null,iconCss:null,groupBy:null})],d.prototype,"fields",void 0),l([i.Property(!0)],d.prototype,"ignoreCase",void 0),l([i.Property(!1)],d.prototype,"showPopupButton",void 0),l([i.Property(!1)],d.prototype,"highlight",void 0),l([i.Property(20)],d.prototype,"suggestionCount",void 0),l([i.Property({})],d.prototype,"htmlAttributes",void 0),l([i.Property(null)],d.prototype,"query",void 0),l([i.Property(1)],d.prototype,"minLength",void 0),l([i.Property("Contains")],d.prototype,"filterType",void 0),l([i.Event()],d.prototype,"filtering",void 0),l([i.Property(null)],d.prototype,"index",void 0),l([i.Property(null)],d.prototype,"valueTemplate",void 0),l([i.Property(null)],d.prototype,"filterBarPlaceholder",void 0),l([i.Property(!1)],d.prototype,"allowFiltering",void 0),l([i.Property(null)],d.prototype,"text",void 0),d=l([s.NotifyPropertyChanges],d),e.AutoComplete=d}.apply(e,s))&&(t.exports=o)},function(t,e,i){var s,o;s=[i,e,i(18)],void 0!==(o=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}(i)}.apply(e,s))&&(t.exports=o)},function(t,e,i){var s,o,n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),l=this&&this.__decorate||function(t,e,i,s){var o,n=arguments.length,l=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,i,s);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(l=(n<3?o(l):n>3?o(e,i,l):o(e,i))||l);return n>3&&l&&Object.defineProperty(e,i,l),l};s=[i,e,i(5),i(11),i(6),i(6),i(6),i(6),i(2),i(6),i(6),i(7)],void 0!==(o=function(t,e,i,s,o,r,a,p,h,u,d,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var v="e-input-focus",m="e-hide-listitem",f="e-chips",y="e-chips-close e-icon",g=function(t){function e(e,i){var s=t.call(this,e,i)||this;return s.isValidKey=!1,s.mainListCollection=[],s.scrollFocusStatus=!1,s.keyDownStatus=!1,s}return n(e,t),e.prototype.enableRTL=function(t){this.enableRtl=t,t?this.overAllWrapper.classList.add("e-rtl"):this.overAllWrapper.classList.remove("e-rtl"),this.popupObj&&(this.popupObj.enableRtl=t,this.popupObj.dataBind())},e.prototype.updateHTMLAttribute=function(){if(Object.keys(this.htmlAttributes).length)for(var t=0,e=Object.keys(this.htmlAttributes);t<e.length;t++){var i=e[t];switch(i){case"class":this.overAllWrapper.classList.add(this.htmlAttributes[i]),this.popupWrapper.classList.add(this.htmlAttributes[i]);break;case"disabled":this.enable(!1);break;case"placeholder":this.inputElement.setAttribute(i,this.htmlAttributes[i]);break;case"name":this.hiddenElement.setAttribute(i,this.htmlAttributes[i]);break;default:var s=["title","id","required"];s.indexOf(i)>-1?this.element.setAttribute(i,this.htmlAttributes[i]):this.overAllWrapper.setAttribute(i,this.htmlAttributes[i])}}},e.prototype.updateReadonly=function(t){t?this.inputElement.setAttribute("readonly","true"):this.inputElement.removeAttribute("readonly")},e.prototype.updateClearButton=function(t){t?(this.overAllClear.parentNode?this.overAllClear.style.display="":this.componentWrapper.appendChild(this.overAllClear),this.componentWrapper.classList.remove("e-close-icon-hide")):(this.overAllClear.style.display="none",this.componentWrapper.classList.add("e-close-icon-hide"))},e.prototype.updateCssClass=function(){this.cssClass&&(this.popupWrapper.classList.add(this.cssClass),this.overAllWrapper.classList.add(this.cssClass))},e.prototype.onPopupShown=function(){var t={name:"FadeIn",duration:100};this.focusAtFirstListItem(),document.body.appendChild(this.popupObj.element),this.refreshPopup(),this.popupObj.show(t),o.attributes(this.inputElement,{"aria-expanded":"true"});var e={popup:this.popupObj};this.trigger("open",e),this.refreshListItems(null)},e.prototype.focusAtFirstListItem=function(){if(this.ulElement&&this.ulElement.querySelector("li."+i.dropDownBaseClasses.li)){var t=this.ulElement.querySelector("li."+i.dropDownBaseClasses.li+":not(."+m+")");null!==t&&(this.removeFocus(),this.addListFocus(t))}},e.prototype.focusAtLastListItem=function(t){var e;t?e=h.Search(t,this.liCollections,"StartsWith",this.ignoreCase):this.value&&this.value.length?h.Search(this.value[this.value.length-1],this.liCollections,"StartsWith",this.ignoreCase):e=null,e&&null!==e.item&&(this.addListFocus(e.item),this.scrollBottom(e.item,e.index))},e.prototype.getAriaAttributes=function(){return{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-multiselectable":"true","aria-activedescendant":"null","aria-haspopup":"true","aria-expanded":"false"}},e.prototype.updateListARIA=function(){o.attributes(this.ulElement,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false"}),o.attributes(this.inputElement,this.getAriaAttributes());var t;t=this.list.querySelectorAll("li."+i.dropDownBaseClasses.li);var e=t.length;if(t&&t.length)for(;e>0;)t[e-1].setAttribute("aria-selected","false"),e--},e.prototype.removelastSelection=function(t){var e;e=this.chipCollectionWrapper.querySelectorAll("span."+f);var i=e[e.length-1].getAttribute("data-value");if(this.removeValue(i,t),this.removeChipSelection(),this.updateDelimeter(t),this.makeTextBoxEmpty(),this.allowFiltering&&this.mainList&&this.listData){var s=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(s,this.mainData),this.refreshSelection()}this.focusAtLastListItem(i)},e.prototype.onActionFailure=function(e){t.prototype.onActionFailure.call(this,e),this.renderPopup(),this.onPopupShown()},e.prototype.onActionComplete=function(e,i,s,o){if(t.prototype.onActionComplete.call(this,e,i,s),this.mainList||this.mainData||(this.mainList=e.cloneNode?e.cloneNode(!0):e,this.mainData=i,this.mainListCollection=this.liCollections),this.remoteCustomValue&&this.allowCustomValue&&this.inputFocus)return void this.checkForCustomValue(this.tempQuery,this.fields);this.value&&this.value.length&&this.refreshSelection(),this.updateListARIA(),this.unwireListEvents(),this.wireListEvents(),this.renderPopup(),this.refreshPopup(),this.dataSource instanceof c.DataManager&&!this.isPopupOpen()&&this.onPopupShown()},e.prototype.refreshSelection=function(){for(var t,e,s=this.hideSelectedItem?m:i.dropDownBaseClasses.selected,o=0;this.value[o];o++)t=this.value[o],(e=this.ulElement.querySelector('li[data-value="'+t+'"]'))&&u.addClass([e],s)},e.prototype.KeyUp=function(t){if(this.isValidKey=8===t.keyCode||this.isValidKey,this.isValidKey)switch(this.isValidKey=!1,this.expandTextbox(),t.keyCode){default:if(this.isPopupOpen()||this.showPopup(),this.liCollections)if(this.checkTextLength()&&!this.allowFiltering&&8!==t.keyCode)this.focusAtFirstListItem();else{var e=this.inputElement.value;if(this.keyCode=t.keyCode,this.allowFiltering)this.trigger("filtering",{text:this.inputElement.value,updateData:this.dataUpdater.bind(this),event:t});else{if(this.allowCustomValue){var s=new c.Query;s=""!==e?s.where(this.fields.text,"startswith",e,!0):s,this.dataUpdater(this.mainData,s,this.fields);break}var o=void 0;o=this.list.querySelectorAll("li."+i.dropDownBaseClasses.li);var n=h.Search(this.inputElement.value,o,"StartsWith",this.ignoreCase);n&&null!==n.item&&(this.addListFocus(n.item),this.list.scrollTop=n.item.getBoundingClientRect().height*n.index)}}}},e.prototype.dataUpdater=function(t,e,i){if(""===this.inputElement.value.trim()){var s=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(s,this.mainData),this.value&&this.value.length&&this.refreshSelection(),8!==this.keyCode&&this.focusAtFirstListItem()}else this.resetList(t,i,e),this.allowCustomValue&&(t instanceof c.DataManager?(this.remoteCustomValue=!0,this.tempQuery=e):this.checkForCustomValue(e,i));this.refreshPopup()},e.prototype.checkForCustomValue=function(t,e){var i=!this.getValueByText(this.inputElement.value,this.ignoreCase);if(this.allowCustomValue&&i){var s=this.fields.text,o=this.fields.value,n={};n[o]=n[s]=this.inputElement.value;var l=JSON.parse(JSON.stringify(this.listData));l.splice(0,0,n),this.resetList(l,e||this.fields,t)}this.value&&this.value.length&&this.refreshSelection()},e.prototype.getNgDirective=function(){return"EJ-MULTISELECT"},e.prototype.wrapperClick=function(t){if(!this.readonly&&this.enabled){if(t.target===this.overAllClear)return void t.preventDefault();if(this.inputFocus||this.inputElement.focus(),t.target&&-1!==t.target.classList.toString().indexOf(y))return void(this.isPopupOpen()&&this.refreshPopup());this.isPopupOpen()?this.hidePopup():this.showPopup(),t.preventDefault()}},e.prototype.enable=function(t){t?(this.overAllWrapper.classList.remove("e-disabled"),this.inputElement.removeAttribute("disabled"),o.attributes(this.inputElement,{"aria-disabled":"false"})):(this.overAllWrapper.classList.add("e-disabled"),this.inputElement.setAttribute("disabled","true"),o.attributes(this.inputElement,{"aria-disabled":"true"})),this.enabled!==t&&(this.enabled=t),this.hidePopup()},e.prototype.onBlur=function(t){if(this.scrollFocusStatus)return t.preventDefault(),this.inputElement.focus(),void(this.scrollFocusStatus=!1);this.inputFocus=!1,this.overAllWrapper.classList.remove(v),"box"!==this.mode&&(this.refreshListItems(null),this.updateDelimView()),this.updateValueState(t,this.value,this.tempValues),this.dispatchEvent(this.hiddenElement,"change"),this.overAllClear.style.display="none",this.isPopupOpen()&&(this.hidePopup(),this.makeTextBoxEmpty()),this.trigger("blur"),p.Browser.isDevice&&"delimiter"!==this.mode&&this.removeChipFocus(),this.removeChipSelection(),this.refreshInputHight(),this.refreshPlaceHolder()},e.prototype.refreshInputHight=function(){this.value&&this.value.length?this.searchWrapper.classList.add("e-zero-size"):this.searchWrapper.classList.remove("e-zero-size")},e.prototype.validateValues=function(t,e){return JSON.stringify(t.slice().sort())!==JSON.stringify(e.slice().sort())},e.prototype.updateValueState=function(t,e,i){var s=e||[],o=i||[];if(this.validateValues(s,o)){var n={e:t,oldValue:i,value:e,isInteracted:!!t};this.trigger("change",n)}},e.prototype.getPagingCount=function(){var t=this.list.classList.contains(i.dropDownBaseClasses.noData)?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height");return Math.round(this.list.getBoundingClientRect().height/parseInt(t,10))},e.prototype.pageUpSelection=function(t){var e=t>=0?this.liCollections[t+1]:this.liCollections[0];this.addListFocus(e),this.scrollBottom(e,this.getIndexByValue(e.getAttribute("data-value")))},e.prototype.pageDownSelection=function(t){var e=this.getItems(),i=t<=e.length?this.liCollections[t-1]:this.liCollections[e.length-1];this.addListFocus(i),this.scrollBottom(i,this.getIndexByValue(i.getAttribute("data-value")))},e.prototype.focusIn=function(){return!(!this.enabled||this.readonly)&&(this.inputFocus=!0,this.value?this.tempValues=this.value.slice():this.tempValues=this.value,this.value&&this.value.length&&("delimiter"!==this.mode?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),this.viewWrapper.style.display="none"),this.searchWrapper.classList.remove("e-zero-size"),this.trigger("focus"),this.overAllWrapper.classList.contains(v)||this.overAllWrapper.classList.add(v),this.isPopupOpen()&&this.refreshPopup(),!0)},e.prototype.showDelimWrapper=function(){this.delimiterWrapper.style.display="",this.componentWrapper.classList.add("e-delimiter")},e.prototype.hideDelimWrapper=function(){this.delimiterWrapper.style.display="none",this.componentWrapper.classList.remove("e-delimiter")},e.prototype.expandTextbox=function(){var t=5;this.placeholder&&(t=t>this.inputElement.placeholder.length?t:this.inputElement.placeholder.length),this.inputElement.value.length>t?this.inputElement.size=this.inputElement.value.length:this.inputElement.size=t},e.prototype.isPopupOpen=function(){return null!==this.popupWrapper&&null!==this.popupWrapper.parentElement},e.prototype.refreshPopup=function(){this.popupObj&&(this.popupObj.setProperties({width:this.calcPopupWidth()}),this.popupObj.refreshPosition(),this.popupObj.show())},e.prototype.checkTextLength=function(){return this.inputElement.value.length<1},e.prototype.popupKeyActions=function(t){switch(t){case 38:this.hidePopup();break;case 40:this.isPopupOpen()||this.showPopup()}},e.prototype.onKeyDown=function(t){if(this.keyDownStatus=!0,!(t.keyCode>111&&t.keyCode<124)){if(t.altKey)return this.popupKeyActions(t.keyCode),void t.preventDefault();if(this.isPopupOpen()){var e=this.list.querySelector("."+i.dropDownBaseClasses.focus);switch(t.keyCode){case 36:this.moveByTop(!0);break;case 35:this.moveByTop(!1);break;case 33:return t.preventDefault(),void(e&&(this.getIndexByValue(e.getAttribute("data-value")),this.pageUpSelection(void 0-this.getPagingCount())));case 34:return t.preventDefault(),
void(e&&(this.getIndexByValue(e.getAttribute("data-value")),this.pageDownSelection(void 0+this.getPagingCount())));case 38:t.preventDefault(),this.moveByList(-1);break;case 40:t.preventDefault(),this.moveByList(1);break;case 27:return t.preventDefault(),void this.hidePopup();case 13:return t.preventDefault(),void this.selectByKey(t)}}else switch(t.keyCode){case 13:case 9:case 16:case 17:case 20:return;case 40:this.showPopup();break;case 27:return t.preventDefault(),void this.escapeAction()}if(this.checkTextLength())if("delimiter"!==this.mode&&this.value&&this.value.length)switch(t.keyCode){case 37:t.preventDefault(),this.moveBy(-1);break;case 39:t.preventDefault(),this.moveBy(1);break;case 8:this.removelastSelection(t);break;case 46:this.removeSelectedChip(t)}else if(8===t.keyCode&&"delimiter"===this.mode&&this.value&&this.value.length){t.preventDefault();var s=this.value[this.value.length-1];this.removeValue(s,t),this.updateDelimeter(t),this.focusAtLastListItem(s)}this.expandTextbox(),this.refreshPopup()}},e.prototype.selectByKey=function(t){this.removeChipSelection(),this.selectListByKey(t),this.hideSelectedItem&&this.focusAtFirstListItem()},e.prototype.escapeAction=function(){var t=this.tempValues?this.tempValues.slice():[];this.value&&this.validateValues(this.value,t)&&(this.value=t,this.initialValueUpdate(),"delimiter"!==this.mode?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),this.refreshPlaceHolder(),this.value.length?this.showOverAllClear():this.hideOverAllClear()),this.makeTextBoxEmpty()},e.prototype.scrollBottom=function(t,e){var i=this.list.getBoundingClientRect().height,s=t.offsetTop+t.getBoundingClientRect().height-this.list.scrollTop,o=this.list.scrollTop+s-i,n=t.offsetTop+t.getBoundingClientRect().height-this.list.scrollTop;n=this.fields.groupBy&&!d.isUndefined(this.fixedHeaderElement)?n-this.fixedHeaderElement.getBoundingClientRect().height:n,0===e?this.list.scrollTop=0:s>i?this.list.scrollTop=o:n>0&&this.list.getBoundingClientRect().height>n||(this.list.scrollTop=o)},e.prototype.scrollTop=function(t,e){var i=t.offsetTop-this.list.scrollTop;t.offsetTop,t.getBoundingClientRect().height,this.list.scrollTop;i=this.fields.groupBy&&!d.isUndefined(this.fixedHeaderElement)?i-this.fixedHeaderElement.getBoundingClientRect().height:i;var s=t.offsetTop+t.getBoundingClientRect().height-this.list.scrollTop;0===e?this.list.scrollTop=0:i<0?this.list.scrollTop=this.list.scrollTop+i:s>0&&this.list.getBoundingClientRect().height>s||(this.list.scrollTop=t.offsetTop-(this.fields.groupBy&&!d.isUndefined(this.fixedHeaderElement)?this.fixedHeaderElement.getBoundingClientRect().height:0))},e.prototype.selectListByKey=function(t){var e=this.list.querySelector("li."+i.dropDownBaseClasses.focus),s=this.value&&this.value.length?this.value.length:0;null!==e&&(this.isValidLI(e)&&s<this.maximumSelectionLength&&(this.updateListSelection(e,t),this.addListFocus(e),this.updateDelimeter(t),this.makeTextBoxEmpty(),this.refreshListItems(e.getAttribute("data-Value")),this.refreshPopup(),this.value&&this.value.length&&(this.removeListSelection(),this.refreshSelection())),this.closePopupOnSelect&&this.hidePopup()),this.refreshPlaceHolder()},e.prototype.refreshListItems=function(t){if((this.allowFiltering||this.allowCustomValue)&&this.mainList&&this.listData){var e=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(e,this.mainData),this.focusAtLastListItem(t),this.value&&this.value.length&&this.refreshSelection()}},e.prototype.removeSelectedChip=function(t){var e,i=this.chipCollectionWrapper.querySelector("span.e-chip-selected");null!==i&&(e=i.nextElementSibling,null!==e&&(this.removeChipSelection(),this.addChipSelection(e)),this.removeValue(i.getAttribute("data-value"),t),this.makeTextBoxEmpty()),this.closePopupOnSelect&&this.hidePopup()},e.prototype.moveByTop=function(t){var e,s=this.list.querySelectorAll("li."+i.dropDownBaseClasses.li);s.length>1&&(this.removeFocus(),e=t?0:s.length-1,this.addListFocus(s[e]),this.scrollBottom(s[e],e))},e.prototype.moveByList=function(t){if(this.list){var e=this.list.querySelectorAll("li."+i.dropDownBaseClasses.li+":not(."+m+")"),s=this.list.querySelector("li."+i.dropDownBaseClasses.focus),o=-1;if(e.length){for(var n=0;n<e.length;n++)if(e[n]===s){o=n;break}t>0?o<e.length-1&&(this.removeFocus(),this.addListFocus(e[++o]),this.scrollBottom(e[o],o)):o>0&&(this.removeFocus(),this.addListFocus(e[--o]),this.scrollTop(e[o],o))}}},e.prototype.moveBy=function(t){var e,i,s;e=this.chipCollectionWrapper.querySelectorAll("span."+f),i=this.chipCollectionWrapper.querySelector("span.e-chip-selected"),null===i?t<0&&this.addChipSelection(e[e.length-1]):t<0?null!==(s=i.previousElementSibling)&&(this.removeChipSelection(),this.addChipSelection(s)):(s=i.nextElementSibling,this.removeChipSelection(),null!==s&&this.addChipSelection(s))},e.prototype.chipClick=function(t){if(this.enabled){var e=u.closest(t.target,"."+f);this.removeChipSelection(),this.addChipSelection(e)}},e.prototype.removeChipSelection=function(){this.chipCollectionWrapper&&this.removeChipFocus()},e.prototype.addChipSelection=function(t){u.addClass([t],"e-chip-selected")},e.prototype.onChipRemove=function(t){if(this.enabled&&!this.readonly){var e=t.target.parentElement,i=this.getFormattedValue(e.getAttribute("data-value"));this.isPopupOpen()&&this.hidePopup(),this.removeValue(i,t),this.updateDelimeter(t),this.makeTextBoxEmpty(),this.inputFocus||this.inputElement.focus(),t.preventDefault()}},e.prototype.makeTextBoxEmpty=function(){this.inputElement.value="",this.refreshPlaceHolder()},e.prototype.refreshPlaceHolder=function(){this.placeholder&&(this.value&&this.value.length?this.inputElement.placeholder="":this.inputElement.placeholder=this.placeholder),this.expandTextbox()},e.prototype.removeValue=function(t,e){var s=this.value.indexOf(this.getFormattedValue(t)),n=this.hideSelectedItem?m:i.dropDownBaseClasses.selected;if(-1!==s){var l=this.list.querySelector('li[data-value="'+t+'"]'),r={e:e,item:l,itemData:this.getDataByValue(t),isInteracted:!!e};this.trigger("removing",r),this.value.splice(s,1),this.setProperties({value:[].concat([],this.value)},!0),null!==l&&(l.setAttribute("aria-selected","false"),u.removeClass([l],n),o.attributes(this.inputElement,{"aria-activedescendant":l.id})),this.updateMainList(!0,t),this.removeChip(t),this.updateChipStatus(),this.trigger("removed",r)}},e.prototype.updateMainList=function(t,e){if(this.allowFiltering){var s=this.mainList.querySelector('li[data-value="'+e+'"]');s&&(t?(s.setAttribute("aria-selected","false"),u.removeClass([s],this.hideSelectedItem?m:i.dropDownBaseClasses.selected)):(s.setAttribute("aria-selected","true"),u.addClass([s],this.hideSelectedItem?m:i.dropDownBaseClasses.selected)))}},e.prototype.removeChip=function(t){if(this.chipCollectionWrapper){var e=this.chipCollectionWrapper.querySelector('span[data-value="'+t+'"]');e&&u.remove(e)}},e.prototype.updateChipStatus=function(){this.value.length?(d.isNullOrUndefined(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display=""),"delimiter"===this.mode&&this.showDelimWrapper(),this.showOverAllClear()):(d.isNullOrUndefined(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display="none"),d.isNullOrUndefined(this.delimiterWrapper)||(this.delimiterWrapper.style.display="none"),this.hideOverAllClear())},e.prototype.addValue=function(t,e,i){this.value||(this.value=[]),this.setProperties({value:[].concat([],this.value,[t])},!0);var s=this.list.querySelector('li[data-value="'+t+'"]');this.removeFocus(),s&&(this.addListFocus(s),this.addListSelection(s)),"delimiter"!==this.mode&&this.addChip(e,t),this.updateChipStatus();var o={e:i,item:s,itemData:this.getDataByValue(t),isInteracted:!!i};this.initStatus&&this.trigger("select",o)},e.prototype.addChip=function(t,e){this.chipCollectionWrapper&&this.chipCollectionWrapper.appendChild(this.getChip(t,e))},e.prototype.removeChipFocus=function(){var t,e;if(t=this.chipCollectionWrapper.querySelectorAll("span."+f),e=this.chipCollectionWrapper.querySelectorAll("span."+y.split(" ")[0]),u.removeClass(t,"e-chip-selected"),p.Browser.isDevice)for(var i=0;i<e.length;i++)e[i].style.display="none"},e.prototype.onMobileChipInteraction=function(t){var e=u.closest(t.target,"."+f),i=e.querySelector("span."+y.split(" ")[0]);this.enabled&&!this.readonly&&(e.classList.contains("e-chip-selected")||(this.removeChipFocus(),i.style.display="",e.classList.add("e-chip-selected")),this.refreshPopup(),t.preventDefault())},e.prototype.getChip=function(t,e){var i,s=u.createElement("span",{className:f,attrs:{"data-value":e,title:t}}),o=u.createElement("span",{className:"e-chipcontent"}),n=u.createElement("span",{className:y});if(i=this.mainData?this.getDataByValue(e):{text:e,value:e},this.valueTemplate&&i)for(var l=a.compile(this.valueTemplate),r=0,h=l(i);r<h.length;r++){var d=h[r];o.appendChild(d)}else o.innerHTML=t;return s.appendChild(o),p.Browser.isDevice?(s.classList.add("e-mob-chip"),u.append([n],s),n.style.display="none",a.EventHandler.add(s,"click",this.onMobileChipInteraction,this)):(a.EventHandler.add(s,"mousedown",this.chipClick,this),this.showClearButton&&s.appendChild(n)),a.EventHandler.add(n,"mousedown",this.onChipRemove,this),s},e.prototype.calcPopupWidth=function(){var t=d.formatUnit(this.popupWidth);if(t.indexOf("%")>-1){t=(this.componentWrapper.getBoundingClientRect().width*parseFloat(t)/100).toString()+"px"}return t},e.prototype.mouseIn=function(){this.enabled&&!this.readonly&&this.showOverAllClear()},e.prototype.mouseOut=function(){this.inputFocus||(this.overAllClear.style.display="none")},e.prototype.renderPopup=function(){var e=this;if(this.list||t.prototype.render.call(this),!this.popupObj){document.body.appendChild(this.popupWrapper);var i=parseInt(this.popupHeight,10);if(this.popupWrapper.style.visibility="hidden",this.headerTemplate){var o=void 0;this.header=document.createElement("div"),u.addClass([this.header],"e-ddl-header"),o=a.compile(this.headerTemplate);for(var n=o({}),l=0;l<n.length;l++)this.header.appendChild(n[l]);u.append([this.header],this.popupWrapper),a.EventHandler.add(this.header,"mousedown",this.onListMouseDown,this),i-=this.header.getBoundingClientRect().height}if(u.append([this.list],this.popupWrapper),this.footerTemplate){var o=void 0;this.footer=document.createElement("div"),u.addClass([this.footer],"e-ddl-footer"),o=a.compile(this.footerTemplate);for(var n=o({}),l=0;l<n.length;l++)this.footer.appendChild(n[l]);u.append([this.footer],this.popupWrapper),a.EventHandler.add(this.footer,"mousedown",this.onListMouseDown,this),i-=this.footer.getBoundingClientRect().height}"auto"!==this.popupHeight?(this.list.style.maxHeight=d.formatUnit(i),this.popupWrapper.style.maxHeight=d.formatUnit(this.popupHeight)):this.list.style.maxHeight=d.formatUnit(this.popupHeight),this.popupObj=new s.Popup(this.popupWrapper,{width:this.calcPopupWidth(),targetType:"relative",position:{X:"left",Y:"bottom"},relateTo:this.overAllWrapper,collision:{X:"none",Y:"flip"},offsetY:1,enableRtl:this.enableRtl,close:function(){e.popupObj.element.parentElement&&u.detach(e.popupObj.element)}}),this.popupObj.close(),this.popupWrapper.style.visibility=""}},e.prototype.ClearAll=function(t){if(this.enabled&&!this.readonly){var e=void 0,i=this.value?this.value.slice():[];for(e=this.value[0];0!==this.value.length;e=this.value[0])this.removeValue(e,t);this.updateDelimeter(t),"box"!==this.mode&&this.updateDelimView(),this.makeTextBoxEmpty(),this.isPopupOpen()&&this.refreshPopup(),this.removeFocus(),this.inputFocus||(this.updateValueState(t,this.value,i),this.inputElement.focus()),t.preventDefault()}},e.prototype.windowResize=function(){this.refreshPopup(),!this.inputFocus&&this.viewWrapper&&this.viewWrapper.parentElement&&this.updateDelimView()},e.prototype.wireEvent=function(){a.EventHandler.add(this.componentWrapper,"mousedown",this.wrapperClick,this),a.EventHandler.add(window,"resize",this.windowResize,this),a.EventHandler.add(this.inputElement,"focus",this.focusIn,this),a.EventHandler.add(this.inputElement,"keydown",this.onKeyDown,this),a.EventHandler.add(this.inputElement,"keyup",this.KeyUp,this),a.EventHandler.add(this.inputElement,"input",this.onInput,this),a.EventHandler.add(this.inputElement,"blur",this.onBlur,this),a.EventHandler.add(this.componentWrapper,"mousemove",this.mouseIn,this),a.EventHandler.add(this.componentWrapper,"mouseout",this.mouseOut,this),a.EventHandler.add(this.overAllClear,"mouseup",this.ClearAll,this)},e.prototype.onInput=function(){this.keyDownStatus?this.isValidKey=!0:this.isValidKey=!1,this.keyDownStatus=!1},e.prototype.preRender=function(){t.prototype.preRender.call(this)},e.prototype.updateValueToView=function(){var t;if(this.chipCollectionWrapper){this.chipCollectionWrapper.innerHTML="";for(var e=0;this.value[e];e++)t=this.value[e],this.addChip(t.toString(),t)}this.updateData()},e.prototype.updateData=function(){var t,e="",i="delimiter"===this.mode,s=[],o=this.listData;this.listData=this.mainData,this.hiddenElement.innerHTML="";for(var n=0;this.value[n];n++)t=this.listData?this.getTextByValue(this.value[n]):this.value[n],e+=t+this.delimiterChar+" ",s.push(t),this.hiddenElement.innerHTML+="<option selected value ="+this.value[n]+">"+n+"</option>";this.text=s.toString(),i&&(this.delimiterWrapper.innerHTML=e),this.listData=o},e.prototype.initialValueUpdate=function(){if(this.list||this.renderPopup(),this.list){var t=void 0,e=void 0,i=void 0;this.chipCollectionWrapper&&(this.chipCollectionWrapper.innerHTML=""),this.removeListSelection();for(var s=0;this.value[s];s++)i=this.value[s],(e=this.list.querySelector('li[data-value="'+i+'"]'))&&(t=this.getTextByValue(i),this.addChip(t,i),this.addListSelection(e));this.updateDelimeter(null),this.inputFocus||("box"===this.mode?this.chipCollectionWrapper.style.display="":"delimiter"===this.mode&&this.showDelimWrapper())}},e.prototype.isValidLI=function(t){return t&&!t.classList.contains(i.dropDownBaseClasses.disabled)&&!t.classList.contains(i.dropDownBaseClasses.group)&&t.classList.contains(i.dropDownBaseClasses.li)},e.prototype.updateListSelection=function(t,e){var i=this.getFormattedValue(t.getAttribute("data-value")),s=this.getTextByValue(i);if(this.removeHover(),this.value&&-1!==this.value.indexOf(i))this.removeValue(i,e);else{if((this.allowCustomValue||this.allowFiltering)&&!this.mainList.querySelector('li[data-value="'+i+'"]')){var o=t.cloneNode(!0),n=this.getDataByValue(i);u.append([o],this.mainList),this.mainData.push(this.getDataByValue(i));var l={newData:n};this.trigger("customValueSelection",l)}this.remoteCustomValue=!1,this.addValue(i,s,e)}},e.prototype.removeListSelection=function(){var t=this.hideSelectedItem?m:i.dropDownBaseClasses.selected,e=this.list.querySelectorAll("."+t),s=e.length;if(e&&e.length)for(u.removeClass(e,t);s>0;)e[s-1].setAttribute("aria-selected","false"),s--},e.prototype.removeHover=function(){var t=this.list.querySelectorAll("."+i.dropDownBaseClasses.hover);t&&t.length&&u.removeClass(t,i.dropDownBaseClasses.hover)},e.prototype.removeFocus=function(){var t=this.list.querySelectorAll("."+i.dropDownBaseClasses.focus),e=this.mainList.querySelectorAll("."+i.dropDownBaseClasses.focus);t&&t.length&&(u.removeClass(t,i.dropDownBaseClasses.focus),u.removeClass(e,i.dropDownBaseClasses.focus))},e.prototype.addListHover=function(t){this.enabled&&this.isValidLI(t)&&(this.removeHover(),u.addClass([t],i.dropDownBaseClasses.hover))},e.prototype.addListFocus=function(t){this.enabled&&this.isValidLI(t)&&(this.removeFocus(),u.addClass([t],i.dropDownBaseClasses.focus))},e.prototype.addListSelection=function(t){var e=this.hideSelectedItem?m:i.dropDownBaseClasses.selected;this.enabled&&this.isValidLI(t)&&!t.classList.contains(i.dropDownBaseClasses.hover)&&(u.addClass([t],e),this.updateMainList(!1,t.getAttribute("data-value")),t.setAttribute("aria-selected","true"),null!==this.chipCollectionWrapper&&this.removeChipSelection(),o.attributes(this.inputElement,{"aria-activedescendant":t.id}))},e.prototype.updateDelimeter=function(t){this.updateData()},e.prototype.onMouseClick=function(t){this.scrollFocusStatus=!1;var e=t.target,s=u.closest(e,"."+i.dropDownBaseClasses.li);if(this.isValidLI(s)){(this.value&&this.value.length?this.value.length:0)<this.maximumSelectionLength&&(this.updateListSelection(s,t),this.addListFocus(s),(this.allowCustomValue||this.allowFiltering)&&this.mainList&&this.listData?(this.focusAtLastListItem(s.getAttribute("data-value")),this.refreshSelection()):this.makeTextBoxEmpty()),this.updateDelimeter(t),this.refreshPopup(),this.hideSelectedItem&&this.focusAtFirstListItem(),this.closePopupOnSelect?(this.hidePopup(),this.makeTextBoxEmpty()):t.preventDefault()}else t.preventDefault();this.refreshPlaceHolder()},e.prototype.onMouseOver=function(t){var e=u.closest(t.target,"."+i.dropDownBaseClasses.li);this.addListHover(e)},e.prototype.onMouseLeave=function(t){this.removeHover()},e.prototype.onListMouseDown=function(t){t.preventDefault(),this.scrollFocusStatus=!0},e.prototype.wireListEvents=function(){a.EventHandler.add(this.list,"mousedown",this.onListMouseDown,this),a.EventHandler.add(this.list,"mouseup",this.onMouseClick,this),a.EventHandler.add(this.list,"mouseover",this.onMouseOver,this),a.EventHandler.add(this.list,"mouseout",this.onMouseLeave,this)},e.prototype.unwireListEvents=function(){this.list&&(a.EventHandler.remove(this.list,"mousedown",this.onListMouseDown),a.EventHandler.remove(this.list,"mouseup",this.onMouseClick),a.EventHandler.remove(this.list,"mouseover",this.onMouseOver),a.EventHandler.remove(this.list,"mouseout",this.onMouseLeave))},e.prototype.hideOverAllClear=function(){this.value&&this.value.length||(this.overAllClear.style.display="none")},e.prototype.showOverAllClear=function(){this.value&&this.value.length&&(this.overAllClear.style.display="")},e.prototype.updateDelimView=function(){if(this.delimiterWrapper&&this.hideDelimWrapper(),this.chipCollectionWrapper&&(this.chipCollectionWrapper.style.display="none"),this.viewWrapper.style.display="",this.value&&this.value.length){var t="",e=void 0,i=void 0,s=1,o=void 0,n=void 0;this.viewWrapper.innerHTML="";var l={noRecordsTemplate:"No Records Found",actionFailureTemplate:"The Request Failed",overflowCountTemplate:"+${count} more.."},r=new a.L10n("dropdowns",l,this.locale),p=r.getConstant("overflowCountTemplate"),h=u.createElement("span",{className:"e-remain"}),d=a.compile(p);h.appendChild(d({count:this.value.length})[0]),this.viewWrapper.appendChild(h);var c=h.getBoundingClientRect().width;u.remove(h),this.viewWrapper.innerHTML="";for(var v=(this.searchWrapper.getBoundingClientRect().width,parseInt(window.getComputedStyle(this.componentWrapper).width,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingRight,10)),m=0;this.value[m];m++){if(t+=0===m?"":this.delimiterChar+" ",e=this.mainData&&this.mainData.length?this.getTextByValue(this.value[m]):this.value[m],t+=e,e=this.viewWrapper.innerHTML,this.viewWrapper.innerHTML=t,(o=this.viewWrapper.getBoundingClientRect().width)>v){void 0!==i&&(e=i,m=s+1),this.viewWrapper.innerHTML=e,n=this.value.length-m;break}o+c<=v?(i=t,s=m):0===m&&(i="",s=-1)}n>0&&(h.innerHTML="",h.appendChild(d({count:n})[0]),this.viewWrapper.appendChild(h))}else this.viewWrapper.innerHTML="",this.viewWrapper.style.display="none"},e.prototype.unWireEvent=function(){a.EventHandler.remove(this.componentWrapper,"mousedown",this.wrapperClick),a.EventHandler.remove(window,"resize",this.windowResize),a.EventHandler.remove(this.inputElement,"focus",this.focusIn),a.EventHandler.remove(this.inputElement,"keydown",this.onKeyDown),a.EventHandler.remove(this.inputElement,"input",this.onInput),a.EventHandler.remove(this.inputElement,"keyup",this.KeyUp),a.EventHandler.remove(this.inputElement,"blur",this.onBlur),a.EventHandler.remove(this.componentWrapper,"mousemove",this.mouseIn),a.EventHandler.remove(this.componentWrapper,"mouseout",this.mouseOut),a.EventHandler.remove(this.overAllClear,"mousedown",this.ClearAll)},e.prototype.onPropertyChanged=function(t,e){for(var i=0,s=Object.keys(t);i<s.length;i++){switch(s[i]){case"htmlAttributes":this.updateHTMLAttribute();break;case"showClearButton":this.updateClearButton(t.showClearButton);break;case"value":this.inputFocus||(this.initialValueUpdate(),"box"!==this.mode&&this.updateDelimView(),this.refreshInputHight(),this.refreshPlaceHolder(),this.updateValueState(null,this.value,e.value));break;case"width":u.setStyleAttribute(this.overAllWrapper,{width:d.formatUnit(t.width)}),this.popupObj.setProperties({width:this.calcPopupWidth()});break;case"placeholder":this.refreshPlaceHolder();break;case"query":case"dataSource":this.resetList(this.dataSource),this.value&&this.value.length&&this.refreshSelection();break;case"cssClass":this.popupWrapper.classList.remove(e.cssClass),this.overAllWrapper.classList.remove(e.cssClass),this.updateCssClass();break;case"enableRtl":this.enableRTL(t.enableRtl);break;case"readonly":this.updateReadonly(t.readonly),this.hidePopup();break;case"enabled":this.hidePopup(),this.enable(t.enabled)}}},e.prototype.hidePopup=function(){if(this.isPopupOpen()){var t={name:"FadeOut",duration:100,delay:100};this.popupObj.hide(new p.Animation(t)),o.attributes(this.inputElement,{"aria-expanded":"false"}),this.popupObj.hide();var e={popup:this.popupObj};this.trigger("close",e)}},e.prototype.showPopup=function(){if(!this.ulElement)return void t.prototype.render.call(this);this.onPopupShown()},e.prototype.selectAll=function(t){var e;e=this.list.querySelectorAll(t?'li[aria-selected="false"]':'li[aria-selected="true"]');var i=e.length;if(e&&e.length)for(;i>0;)this.updateListSelection(e[i-1],null),i--;this.refreshPlaceHolder()},e.prototype.getModuleName=function(){return"multiselect"},e.prototype.render=function(){this.initStatus=!1,this.searchWrapper=u.createElement("span",{className:"e-searcher"}),this.viewWrapper=u.createElement("span",{className:"e-delim-view e-delim-values",styles:"display:none;"}),this.overAllClear=u.createElement("span",{className:"e-chips-close e-icon e-close-hooker",styles:"display:none;"}),this.componentWrapper=u.createElement("div",{className:"e-multi-select-wrapper"}),this.overAllWrapper=u.createElement("div",{className:"e-multiselect e-input-group"}),p.Browser.isDevice&&this.componentWrapper.classList.add("e-mob-wrapper"),this.overAllWrapper.style.width=d.formatUnit(this.width),this.overAllWrapper.appendChild(this.componentWrapper),this.popupWrapper=u.createElement("div",{id:this.element.id+"_popup",className:"e-ddl e-popup e-multi-select-list-wrapper"}),"delimiter"===this.mode?(this.delimiterWrapper=u.createElement("span",{className:"e-delim-values",styles:"display:none"}),this.componentWrapper.appendChild(this.delimiterWrapper)):(this.chipCollectionWrapper=u.createElement("span",{className:"e-chips-collection",styles:"display:none"}),this.componentWrapper.appendChild(this.chipCollectionWrapper)),"box"!==this.mode&&this.componentWrapper.appendChild(this.viewWrapper),this.componentWrapper.appendChild(this.searchWrapper),this.showClearButton&&!p.Browser.isDevice?this.componentWrapper.appendChild(this.overAllClear):this.componentWrapper.classList.add("e-close-icon-hide"),this.inputElement=u.createElement("input",{className:"e-dropdownbase",attrs:{spellcheck:"false",type:"text",autocomplete:"off",tabindex:"0"}}),this.refreshPlaceHolder(),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.tagName===this.getNgDirective()?(this.element.appendChild(this.overAllWrapper),this.searchWrapper.appendChild(this.inputElement)):(this.element.parentElement.insertBefore(this.overAllWrapper,this.element),this.searchWrapper.appendChild(this.inputElement),this.searchWrapper.appendChild(this.element),this.element.removeAttribute("tabindex"));var t=this.element.getAttribute("name")?this.element.getAttribute("name"):this.element.getAttribute("id"),e=this.element.getAttribute("id")?this.element.getAttribute("id"):d.getUniqueID("ej2_dropdownlist");this.element.id=e,this.element.style.opacity="",this.hiddenElement=u.createElement("select",{attrs:{name:t,"aria-hidden":"true",multiple:"true"},styles:"display:none"}),this.element.removeAttribute("name"),this.searchWrapper.appendChild(this.hiddenElement),this.hideOverAllClear(),this.wireEvent(),this.enable(this.enabled),this.enableRTL(this.enableRtl),this.dataSource instanceof c.DataManager?this.value&&this.value.length&&this.updateValueToView():(this.renderPopup(),this.value&&this.value.length&&this.initialValueUpdate()),this.updateCssClass(),this.updateHTMLAttribute(),this.updateReadonly(this.readonly),this.initStatus=!0,"box"!==this.mode&&this.updateDelimView(),this.refreshInputHight()},e.prototype.destroy=function(){this.popupObj&&this.popupObj.hide(),this.unwireListEvents(),this.unWireEvent(),t.prototype.destroy.call(this);for(var e=["readonly","aria-disabled","aria-placeholder","placeholder"],i=e.length;i>0;)this.inputElement.removeAttribute(e[i-1]),i--;this.element.style.display="block",this.overAllWrapper.parentElement&&(this.overAllWrapper.parentElement.tagName===this.getNgDirective()?u.remove(this.overAllWrapper):(this.overAllWrapper.parentElement.insertBefore(this.element,this.overAllWrapper),u.remove(this.overAllWrapper)))},e}(i.DropDownBase);l([a.Property(null)],g.prototype,"cssClass",void 0),l([a.Property("100%")],g.prototype,"width",void 0),l([a.Property("300px")],g.prototype,"popupHeight",void 0),l([a.Property("100%")],g.prototype,"popupWidth",void 0),l([a.Property(null)],g.prototype,"placeholder",void 0),l([a.Property({})],g.prototype,"htmlAttributes",void 0),l([a.Property(null)],g.prototype,"valueTemplate",void 0),l([a.Property(null)],g.prototype,"headerTemplate",void 0),l([a.Property(null)],g.prototype,"footerTemplate",void 0),l([a.Property(null)],g.prototype,"itemTemplate",void 0),l([a.Property(!1)],g.prototype,"allowFiltering",void 0),l([a.Property(!1)],g.prototype,"allowCustomValue",void 0),l([a.Property(!0)],g.prototype,"showClearButton",void 0),l([a.Property(1e3)],g.prototype,"maximumSelectionLength",void 0),l([a.Property(!1)],g.prototype,"readonly",void 0),l([a.Property(null)],g.prototype,"text",void 0),l([a.Property(null)],g.prototype,"value",void 0),l([a.Property(!1)],g.prototype,"hideSelectedItem",void 0),l([a.Property(!0)],g.prototype,"closePopupOnSelect",void 0),l([a.Property("default")],g.prototype,"mode",void 0),l([a.Property(",")],g.prototype,"delimiterChar",void 0),l([a.Property(!0)],g.prototype,"ignoreCase",void 0),l([a.Event()],g.prototype,"change",void 0),l([a.Event()],g.prototype,"removing",void 0),l([a.Event()],g.prototype,"removed",void 0),l([a.Event()],g.prototype,"open",void 0),l([a.Event()],g.prototype,"close",void 0),l([a.Event()],g.prototype,"blur",void 0),l([a.Event()],g.prototype,"focus",void 0),l([a.Event()],g.prototype,"filtering",void 0),l([a.Event()],g.prototype,"customValueSelection",void 0),g=l([r.NotifyPropertyChanges],g),e.MultiSelect=g}.apply(e,s))&&(t.exports=o)}])});
//# sourceMappingURL=ej2-dropdowns.umd.min.js.map
